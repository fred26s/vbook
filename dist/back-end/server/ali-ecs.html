<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>搭建一个阿里云ECS实例服务器 | BLOG</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/vbook/favicon.ico">
    <meta name="description" content="学习笔记">
    <link rel="preload" href="/vbook/assets/css/0.styles.e0606203.css" as="style"><link rel="preload" href="/vbook/assets/js/app.56a9a2ed.js" as="script"><link rel="preload" href="/vbook/assets/js/2.2ce5df5b.js" as="script"><link rel="preload" href="/vbook/assets/js/27.f153037d.js" as="script"><link rel="prefetch" href="/vbook/assets/js/10.09b2ea05.js"><link rel="prefetch" href="/vbook/assets/js/11.b33443e5.js"><link rel="prefetch" href="/vbook/assets/js/12.31280131.js"><link rel="prefetch" href="/vbook/assets/js/13.1ae03640.js"><link rel="prefetch" href="/vbook/assets/js/14.d41b2257.js"><link rel="prefetch" href="/vbook/assets/js/15.b571d130.js"><link rel="prefetch" href="/vbook/assets/js/16.8a84fe06.js"><link rel="prefetch" href="/vbook/assets/js/17.be4efc3d.js"><link rel="prefetch" href="/vbook/assets/js/18.d449664b.js"><link rel="prefetch" href="/vbook/assets/js/19.8f8c2dff.js"><link rel="prefetch" href="/vbook/assets/js/20.5d3267da.js"><link rel="prefetch" href="/vbook/assets/js/21.a6523cdd.js"><link rel="prefetch" href="/vbook/assets/js/22.c640d9af.js"><link rel="prefetch" href="/vbook/assets/js/23.879bf70a.js"><link rel="prefetch" href="/vbook/assets/js/24.bd48ace9.js"><link rel="prefetch" href="/vbook/assets/js/25.0f12410b.js"><link rel="prefetch" href="/vbook/assets/js/26.718ccfa4.js"><link rel="prefetch" href="/vbook/assets/js/28.508d01f9.js"><link rel="prefetch" href="/vbook/assets/js/29.dbe0222b.js"><link rel="prefetch" href="/vbook/assets/js/3.dfccb20d.js"><link rel="prefetch" href="/vbook/assets/js/30.9988d278.js"><link rel="prefetch" href="/vbook/assets/js/31.6008081f.js"><link rel="prefetch" href="/vbook/assets/js/32.6d16c0dd.js"><link rel="prefetch" href="/vbook/assets/js/33.e4e21daf.js"><link rel="prefetch" href="/vbook/assets/js/34.d37fab85.js"><link rel="prefetch" href="/vbook/assets/js/35.6f741ed5.js"><link rel="prefetch" href="/vbook/assets/js/36.58d8b589.js"><link rel="prefetch" href="/vbook/assets/js/37.674e27ab.js"><link rel="prefetch" href="/vbook/assets/js/38.fa018258.js"><link rel="prefetch" href="/vbook/assets/js/39.2f197b8d.js"><link rel="prefetch" href="/vbook/assets/js/4.d599a372.js"><link rel="prefetch" href="/vbook/assets/js/40.60890a66.js"><link rel="prefetch" href="/vbook/assets/js/41.99ac89f4.js"><link rel="prefetch" href="/vbook/assets/js/42.fc4ec52c.js"><link rel="prefetch" href="/vbook/assets/js/43.f3404978.js"><link rel="prefetch" href="/vbook/assets/js/44.98c5c2de.js"><link rel="prefetch" href="/vbook/assets/js/45.4f1b0703.js"><link rel="prefetch" href="/vbook/assets/js/46.ed7569c8.js"><link rel="prefetch" href="/vbook/assets/js/5.4413bd57.js"><link rel="prefetch" href="/vbook/assets/js/6.0afd5f60.js"><link rel="prefetch" href="/vbook/assets/js/7.61ee7893.js"><link rel="prefetch" href="/vbook/assets/js/8.aa2210e7.js"><link rel="prefetch" href="/vbook/assets/js/9.2be3499c.js">
    <link rel="stylesheet" href="/vbook/assets/css/0.styles.e0606203.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vbook/" class="home-link router-link-active"><!----> <span class="site-name">BLOG</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习笔记" class="dropdown-title"><span class="title">前端学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端学习笔记" class="mobile-dropdown-title"><span class="title">前端学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vbook/front-end/evo/优化方式.html" class="nav-link">
  前端优化
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/js/es6知识.html" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/vue/vue知识点.html" class="nav-link">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/webpack/webpack基础.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/net/网络基础.html" class="nav-link">
  网络基础
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/tools/GIT.html" class="nav-link">
  开发工具
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/ci/travis自动部署.html" class="nav-link">
  前端自动化
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后台学习笔记" class="dropdown-title"><span class="title">后台学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="后台学习笔记" class="mobile-dropdown-title"><span class="title">后台学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vbook/back-end/node/express.html" class="nav-link">
  NodeJS
</a></li><li class="dropdown-item"><!----> <a href="/vbook/back-end/lib-web/RESTful.html" class="nav-link">
  web开发知识
</a></li><li class="dropdown-item"><!----> <a href="/vbook/back-end/server/Nginx.html" class="nav-link">
  服务器
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JustDoIT" class="dropdown-title"><span class="title">JustDoIT</span> <span class="arrow down"></span></button> <button type="button" aria-label="JustDoIT" class="mobile-dropdown-title"><span class="title">JustDoIT</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vbook/funs/hardware/arduino.html" class="nav-link">
  硬件
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习笔记" class="dropdown-title"><span class="title">前端学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端学习笔记" class="mobile-dropdown-title"><span class="title">前端学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vbook/front-end/evo/优化方式.html" class="nav-link">
  前端优化
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/js/es6知识.html" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/vue/vue知识点.html" class="nav-link">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/webpack/webpack基础.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/net/网络基础.html" class="nav-link">
  网络基础
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/tools/GIT.html" class="nav-link">
  开发工具
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/ci/travis自动部署.html" class="nav-link">
  前端自动化
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后台学习笔记" class="dropdown-title"><span class="title">后台学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="后台学习笔记" class="mobile-dropdown-title"><span class="title">后台学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vbook/back-end/node/express.html" class="nav-link">
  NodeJS
</a></li><li class="dropdown-item"><!----> <a href="/vbook/back-end/lib-web/RESTful.html" class="nav-link">
  web开发知识
</a></li><li class="dropdown-item"><!----> <a href="/vbook/back-end/server/Nginx.html" class="nav-link">
  服务器
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JustDoIT" class="dropdown-title"><span class="title">JustDoIT</span> <span class="arrow down"></span></button> <button type="button" aria-label="JustDoIT" class="mobile-dropdown-title"><span class="title">JustDoIT</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vbook/funs/hardware/arduino.html" class="nav-link">
  硬件
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>服务器</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vbook/back-end/server/Nginx.html" class="sidebar-link">Nginx</a></li><li><a href="/vbook/back-end/server/ali-ecs.html" aria-current="page" class="active sidebar-link">云服务器&amp;CentOS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vbook/back-end/server/ali-ecs.html#搭建一个阿里云ecs实例服务器" class="sidebar-link">搭建一个阿里云ECS实例服务器</a></li><li class="sidebar-sub-header"><a href="/vbook/back-end/server/ali-ecs.html#购买ecs服务器" class="sidebar-link">购买ECS服务器</a></li><li class="sidebar-sub-header"><a href="/vbook/back-end/server/ali-ecs.html#配置" class="sidebar-link">配置</a></li><li class="sidebar-sub-header"><a href="/vbook/back-end/server/ali-ecs.html#添加安全组规则" class="sidebar-link">添加安全组规则：</a></li><li class="sidebar-sub-header"><a href="/vbook/back-end/server/ali-ecs.html#连接linux服务器" class="sidebar-link">连接LINUX服务器</a></li><li class="sidebar-sub-header"><a href="/vbook/back-end/server/ali-ecs.html#在windows环境中使用密钥对" class="sidebar-link">在Windows环境中使用密钥对</a></li><li class="sidebar-sub-header"><a href="/vbook/back-end/server/ali-ecs.html#通过vnc连接linux" class="sidebar-link">通过VNC连接LINUX</a></li><li class="sidebar-sub-header"><a href="/vbook/back-end/server/ali-ecs.html#连接成功" class="sidebar-link">连接成功</a></li><li class="sidebar-sub-header"><a href="/vbook/back-end/server/ali-ecs.html#putty工具反空闲" class="sidebar-link">putty工具反空闲</a></li><li class="sidebar-sub-header"><a href="/vbook/back-end/server/ali-ecs.html#启动apache服务" class="sidebar-link">启动Apache服务</a></li><li class="sidebar-sub-header"><a href="/vbook/back-end/server/ali-ecs.html#启动nginx" class="sidebar-link">启动Nginx</a></li><li class="sidebar-sub-header"><a href="/vbook/back-end/server/ali-ecs.html#安装node环境" class="sidebar-link">安装node环境</a></li><li class="sidebar-sub-header"><a href="/vbook/back-end/server/ali-ecs.html#安装mysql" class="sidebar-link">安装mysql</a></li><li class="sidebar-sub-header"><a href="/vbook/back-end/server/ali-ecs.html#mysql-down掉" class="sidebar-link">mysql down掉</a></li></ul></li><li><a href="/vbook/back-end/server/linux基础.html" class="sidebar-link">Linux基础</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="搭建一个阿里云ecs实例服务器"><a href="#搭建一个阿里云ecs实例服务器" class="header-anchor">#</a> 搭建一个阿里云ECS实例服务器</h2> <h2 id="购买ecs服务器"><a href="#购买ecs服务器" class="header-anchor">#</a> 购买ECS服务器</h2> <p>不赘述了，支付宝一条龙</p> <h2 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h2> <p>购买服务器后，就创建了一个ECS实例；</p> <h2 id="添加安全组规则"><a href="#添加安全组规则" class="header-anchor">#</a> 添加安全组规则：</h2> <p>这里实际上就是配置服务器实例可供访问的端口和IP，可以指定访问IP白名单和黑名单；</p> <p>初始化我们需要配置增加80端口，否则默认是不开放的；</p> <h2 id="连接linux服务器"><a href="#连接linux服务器" class="header-anchor">#</a> 连接LINUX服务器</h2> <p>这里使用PUTTY连接LINUX，通过SSH来实现远程连接；</p> <blockquote><h2 id="在windows环境中使用密钥对"><a href="#在windows环境中使用密钥对" class="header-anchor">#</a> 在Windows环境中使用密钥对</h2> <p>下面以PuTTYgen为例介绍如何将私钥文件格式从.pem转换为.ppk，并以PuTTY为例介绍如何使用密钥对连接Linux实例。</p> <ol><li><p>下载并安装PuTTYgen和PuTTY。</p> <p>下载链接如下：</p> <ul><li><a href="https://the.earth.li/~sgtatham/putty/latest/w64/puttygen.exe" target="_blank" rel="noopener noreferrer">PuTTYgen <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://the.earth.li/~sgtatham/putty/latest/w64/putty.exe?spm=5176.2020520101.0.0.42554df5Q7Lhji&amp;file=putty.exe" target="_blank" rel="noopener noreferrer">PuTTY <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li> <li><p>将.pem私钥文件转换为.ppk私钥文件。</p> <ol><li><p>启动PuTTYgen。</p> <p>本示例中的PuTTYgen版本为0.71。</p></li> <li><p>选择<strong>Type of key to generate</strong>为<strong>RSA</strong>，然后单击<strong>Load</strong>。</p> <p><img src="https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/8965033851/p51179.png" alt="windows_puttygen_1"></p></li> <li><p>选择<strong>All Files</strong>。</p> <p><img src="https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/8965033851/p5188.png" alt="windows_puttygen_2"></p></li> <li><p>选择待转换的.pem私钥文件。</p></li> <li><p>在弹出的对话框中，单击<strong>确定</strong>。</p></li> <li><p>单击<strong>Save private key</strong>。</p></li> <li><p>在弹出的对话框中，单击<strong>是</strong>。</p></li> <li><p>指定.ppk私钥文件的名称，然后单击<strong>保存</strong>。</p></li></ol></li> <li><p>启动PuTTY。</p></li> <li><p>配置用于身份验证的私钥文件。</p> <ol><li>选择<strong>Connection &gt; SSH &gt; Auth</strong>。</li> <li>单击<strong>Browse…</strong>。</li> <li>选择转换好的.ppk私钥文件。</li></ol> <p><img src="https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/9965033851/p5191.png" alt="windows_putty_3"></p></li> <li><p>配置连接Linux实例所需的信息。</p> <ol><li><p>单击<strong>Session</strong>。</p></li> <li><p>在**Host Name (or IP address)**中输入登录账号和实例公网IP地址。</p> <p>格式为<strong>root@IP 地址</strong>，例如root@10.10.xx.xxx。</p></li> <li><p>在<strong>Port</strong>中输入端口号<strong>22</strong>。</p></li> <li><p>选择<strong>Connection type</strong>为<strong>SSH</strong>。</p></li></ol> <p><img src="https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/9965033851/p5192.png" alt="windows_putty_4"></p></li> <li><p>单击<strong>Open</strong>。</p> <p>当出现以下提示时，说明您已经成功地使用SSH密钥对登录了实例。<img src="https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/9965033851/p51203.png" alt="windows_putty_5"></p></li></ol></blockquote> <h2 id="通过vnc连接linux"><a href="#通过vnc连接linux" class="header-anchor">#</a> 通过VNC连接LINUX</h2> <p>如果SSH有问题，可以直接通过网页VNC连接服务器；</p> <p>需要输入<strong>远程连接密码</strong>，这个密码是第一次连接时会给你；</p> <p>连接linux后，输入账户<code>root</code>，密码是<strong>实例密码</strong>，</p> <p>实例密码账户第一次登陆是没有的，需要重置实例密码，重置后重启实例即可生效；</p> <h2 id="连接成功"><a href="#连接成功" class="header-anchor">#</a> 连接成功</h2> <p>提示如下文字证明连接服务器成功；</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Welcome to Alibaba Cloud Elastic Compute Service !
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="putty工具反空闲"><a href="#putty工具反空闲" class="header-anchor">#</a> putty工具反空闲</h2> <p>服务器为了安全会在一段时间内没有数据操作时，断开连接；</p> <p>所以我们使用PUTTY连接服务器时，为了防止自动断开，可以设置反空闲操作每隔N秒向服务器自动发送一条消息；</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>putty的设置方法：
putty -&gt; Connection -&gt; Seconds between keepalives ( 0 to turn off ), 默认为0, 改为300
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="启动apache服务"><a href="#启动apache服务" class="header-anchor">#</a> 启动Apache服务</h2> <p>套用官网DOC一条龙，顺利启动起服务；</p> <ol><li><p>安装Apache服务。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>yum install -y httpd
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>启动Apache服务。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>systemctl start httpd
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>设置Apache服务开机自启动。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>systemctl enable httpd
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>查询Apache服务是否处于运行中状态。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>systemctl status httpd
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <p>那怎么关闭Apache服务呢，这里再说几个常用的命令；</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>service httpd start // 启动
service httpd restart // 重新启动
service httpd stop // 停止服务
rpm -e httpd  // Apache卸载
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="启动nginx"><a href="#启动nginx" class="header-anchor">#</a> 启动Nginx</h2> <p>安装nginx前，需要先添加yum源，因为默认情况Centos中并无Nginx的源；</p> <ol><li><p>先安装yum-utils</p> <p>这是一个管理repository及扩展包的工具；</p></li> <li><p>添加源</p> <p><code>cd /etc/yum.repos.d/</code>目录下；</p> <p>新建 <code>vim nginx.repo</code>文件，就增加了一个源文件信息;</p> <p>然后输入以下内容：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[nginx-stable]
name=nginx stable repo
baseurl=http://nginx.org/packages/centos/$releasever/$basearch/
gpgcheck=1
enabled=1
gpgkey=https://nginx.org/keys/nginx_signing.key

[nginx-mainline]
name=nginx mainline repo
baseurl=http://nginx.org/packages/mainline/centos/$releasever/$basearch/
gpgcheck=1
enabled=0
gpgkey=https://nginx.org/keys/nginx_signing.key
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ol start="3"><li><p>安装Nginx</p> <p>先查看是否加源成功；</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>yum search nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果成功，就开始通过yum安装；</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>yum install nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>安装完毕后查看是否安装成功；</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>rpm -qa | grep nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这里说一下这个命令：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>rpm -qa|grep package-name 

rpm -qa
列出所有被安装的rpm package

rpm -q &lt;rpm package name&gt;
查询 rpm package name 的包是否知被安装

| 表示将输出结果（字符道串）转向到后面的命令处理
grep xxx 表示在当前结果中搜索包专含xxx字样的字符串
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>也就是查询是否有被安装的nginx包；</p></li> <li><p>启动nginx</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>systemctl start nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>开机启动</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>systemctl enable nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>查看状态</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>systemctl status nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol></li></ol> <h2 id="安装node环境"><a href="#安装node环境" class="header-anchor">#</a> 安装node环境</h2> <blockquote><p><a href="https://github.com/nodesource/distributions" target="_blank" rel="noopener noreferrer">https://github.com/nodesource/distributions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>这里介绍了linux安装地址；</p></blockquote> <p>文件传输：（这里是下载10.X版本node）</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>curl -sL https://rpm.nodesource.com/setup_10.x | bash -
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>yum安装：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>yum install -y nodejs
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看是否安装成功：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>node -v
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="安装mysql"><a href="#安装mysql" class="header-anchor">#</a> 安装mysql</h2> <blockquote><p><a href="https://segmentfault.com/a/1190000019507071" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000019507071<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>这篇文章详细讲解了如何在linux下，安装mysql；</p> <p>照步骤来即可；</p> <ol><li>添加yum源</li> <li><code>yum i mysql-community-server</code>安装</li> <li>启动MySQL</li> <li>修改密码</li> <li>设置允许root远程访问</li> <li>设置编码格式为UTF8</li> <li>设置开机启动</li></ol></blockquote> <h3 id="常用命令"><a href="#常用命令" class="header-anchor">#</a> 常用命令</h3> <p>启动</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>systemctl start mysqld.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看状态</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>systemctl status mysqld.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>停止</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>systemctl stop mysqld.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>重启</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>systemctl restart mysqld.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="授权问题"><a href="#授权问题" class="header-anchor">#</a> 授权问题</h3> <p>1.mysql从8.0开始改变了授权语句，</p> <p>之前版本使用的这个语句，现在会报错；</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY '123456' WITH GRANT OPTION;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>应该使用以下语句进行授权</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>grant all privileges on *.* to ‘root'@'%' ;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>但初始化设置时，可能会报错没有此用户授权权限，我们需要先创建root用户；</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>CREATE USER 'root'@'%' IDENTIFIED BY 'password';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2.navcat远程连接</p> <blockquote><p>会因为  Mysql远程连接报错：authentication plugin caching_sha2</p> <p>mysql 8.0 默认使用 caching_sha2_password 身份验证机制 —— 从原来的 mysql_native_password 更改为 caching_sha2_password。</p></blockquote> <p>这里修改身份验证方式的解决方案：</p> <ol><li><p>查看mysql版本</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&gt; select version();
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>查看当前默认的密码认证插件：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>show variables like 'default_authentication_plugin';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>查看当前所有用户绑定的认证插件：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>select host,user,plugin from mysql.user;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>假如想更改 root 用户的认证方式</p> <div class="language- line-numbers-mode"><pre class="language-text"><code> ALTER USER 'root'@'%' IDENTIFIED BY 'root' PASSWORD EXPIRE NEVER;
# 更新用户密码
&gt; ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456';
# 赋予 root 用户最高权限
&gt; grant all privileges on *.* to root@'%' with grant option;
# 刷新权限
&gt; flush privileges;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ol> <h3 id="启动node项目"><a href="#启动node项目" class="header-anchor">#</a> 启动node项目</h3> <p>安装pm2，可以直接启动dist目录下的server.js；</p> <h2 id="mysql-down掉"><a href="#mysql-down掉" class="header-anchor">#</a> mysql down掉</h2> <p>现在发现mysql数据库，会在服务器间歇性停止、并重启；</p> <p>这样造成了<code>serve</code>端，请求数据库时，报错<code>Error: Cannot enqueue Query after fatal error.</code>，提示致命错误；</p> <p>初步debug，发现问题是，<code>serve</code>端代码只在初始化时连接了<code>mysql</code>数据库，并且没有执行关闭操作；</p> <p><code>serve</code>服务持续开启，但当<code>mysql</code>数据库重启后，<code>serve</code>连接的<code>mysql</code>实例并没有被释放，仍旧使用重启前的连接实例，进行请求，造成请求失败；</p> <h3 id="目前解决方法"><a href="#目前解决方法" class="header-anchor">#</a> 目前解决方法：</h3> <p>可以重启<code>serve</code>端服务，即可解决此问题；</p> <p>后期考虑修改<code>serve</code>代码，以事务为原子模块，进行实时开关数据库的操作；</p> <p>保证每次请求，都是重新连接当前的<code>mysql</code>服务。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vbook/back-end/server/Nginx.html" class="prev">
        Nginx
      </a></span> <span class="next"><a href="/vbook/back-end/server/linux基础.html">
        Linux基础
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vbook/assets/js/app.56a9a2ed.js" defer></script><script src="/vbook/assets/js/2.2ce5df5b.js" defer></script><script src="/vbook/assets/js/27.f153037d.js" defer></script>
  </body>
</html>
