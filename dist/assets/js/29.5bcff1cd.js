(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{383:function(s,e,a){"use strict";a.r(e);var t=a(42),n=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"搭建一个阿里云ecs实例服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搭建一个阿里云ecs实例服务器"}},[s._v("#")]),s._v(" 搭建一个阿里云ECS实例服务器")]),s._v(" "),a("h2",{attrs:{id:"购买ecs服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#购买ecs服务器"}},[s._v("#")]),s._v(" 购买ECS服务器")]),s._v(" "),a("p",[s._v("不赘述了，支付宝一条龙")]),s._v(" "),a("h2",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[s._v("#")]),s._v(" 配置")]),s._v(" "),a("p",[s._v("购买服务器后，就创建了一个ECS实例；")]),s._v(" "),a("h2",{attrs:{id:"添加安全组规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加安全组规则"}},[s._v("#")]),s._v(" 添加安全组规则：")]),s._v(" "),a("p",[s._v("这里实际上就是配置服务器实例可供访问的端口和IP，可以指定访问IP白名单和黑名单；")]),s._v(" "),a("p",[s._v("初始化我们需要配置增加80端口，否则默认是不开放的；")]),s._v(" "),a("h2",{attrs:{id:"连接linux服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连接linux服务器"}},[s._v("#")]),s._v(" 连接LINUX服务器")]),s._v(" "),a("p",[s._v("这里使用PUTTY连接LINUX，通过SSH来实现远程连接；")]),s._v(" "),a("blockquote",[a("h2",{attrs:{id:"在windows环境中使用密钥对"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在windows环境中使用密钥对"}},[s._v("#")]),s._v(" 在Windows环境中使用密钥对")]),s._v(" "),a("p",[s._v("下面以PuTTYgen为例介绍如何将私钥文件格式从.pem转换为.ppk，并以PuTTY为例介绍如何使用密钥对连接Linux实例。")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("下载并安装PuTTYgen和PuTTY。")]),s._v(" "),a("p",[s._v("下载链接如下：")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://the.earth.li/~sgtatham/putty/latest/w64/puttygen.exe",target:"_blank",rel:"noopener noreferrer"}},[s._v("PuTTYgen "),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://the.earth.li/~sgtatham/putty/latest/w64/putty.exe?spm=5176.2020520101.0.0.42554df5Q7Lhji&file=putty.exe",target:"_blank",rel:"noopener noreferrer"}},[s._v("PuTTY "),a("OutboundLink")],1)])])]),s._v(" "),a("li",[a("p",[s._v("将.pem私钥文件转换为.ppk私钥文件。")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("启动PuTTYgen。")]),s._v(" "),a("p",[s._v("本示例中的PuTTYgen版本为0.71。")])]),s._v(" "),a("li",[a("p",[s._v("选择"),a("strong",[s._v("Type of key to generate")]),s._v("为"),a("strong",[s._v("RSA")]),s._v("，然后单击"),a("strong",[s._v("Load")]),s._v("。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/8965033851/p51179.png",alt:"windows_puttygen_1"}})])]),s._v(" "),a("li",[a("p",[s._v("选择"),a("strong",[s._v("All Files")]),s._v("。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/8965033851/p5188.png",alt:"windows_puttygen_2"}})])]),s._v(" "),a("li",[a("p",[s._v("选择待转换的.pem私钥文件。")])]),s._v(" "),a("li",[a("p",[s._v("在弹出的对话框中，单击"),a("strong",[s._v("确定")]),s._v("。")])]),s._v(" "),a("li",[a("p",[s._v("单击"),a("strong",[s._v("Save private key")]),s._v("。")])]),s._v(" "),a("li",[a("p",[s._v("在弹出的对话框中，单击"),a("strong",[s._v("是")]),s._v("。")])]),s._v(" "),a("li",[a("p",[s._v("指定.ppk私钥文件的名称，然后单击"),a("strong",[s._v("保存")]),s._v("。")])])])]),s._v(" "),a("li",[a("p",[s._v("启动PuTTY。")])]),s._v(" "),a("li",[a("p",[s._v("配置用于身份验证的私钥文件。")]),s._v(" "),a("ol",[a("li",[s._v("选择"),a("strong",[s._v("Connection > SSH > Auth")]),s._v("。")]),s._v(" "),a("li",[s._v("单击"),a("strong",[s._v("Browse…")]),s._v("。")]),s._v(" "),a("li",[s._v("选择转换好的.ppk私钥文件。")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/9965033851/p5191.png",alt:"windows_putty_3"}})])]),s._v(" "),a("li",[a("p",[s._v("配置连接Linux实例所需的信息。")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("单击"),a("strong",[s._v("Session")]),s._v("。")])]),s._v(" "),a("li",[a("p",[s._v("在**Host Name (or IP address)**中输入登录账号和实例公网IP地址。")]),s._v(" "),a("p",[s._v("格式为"),a("strong",[s._v("root@IP 地址")]),s._v("，例如root@10.10.xx.xxx。")])]),s._v(" "),a("li",[a("p",[s._v("在"),a("strong",[s._v("Port")]),s._v("中输入端口号"),a("strong",[s._v("22")]),s._v("。")])]),s._v(" "),a("li",[a("p",[s._v("选择"),a("strong",[s._v("Connection type")]),s._v("为"),a("strong",[s._v("SSH")]),s._v("。")])])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/9965033851/p5192.png",alt:"windows_putty_4"}})])]),s._v(" "),a("li",[a("p",[s._v("单击"),a("strong",[s._v("Open")]),s._v("。")]),s._v(" "),a("p",[s._v("当出现以下提示时，说明您已经成功地使用SSH密钥对登录了实例。"),a("img",{attrs:{src:"https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/9965033851/p51203.png",alt:"windows_putty_5"}})])])])]),s._v(" "),a("h2",{attrs:{id:"通过vnc连接linux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过vnc连接linux"}},[s._v("#")]),s._v(" 通过VNC连接LINUX")]),s._v(" "),a("p",[s._v("如果SSH有问题，可以直接通过网页VNC连接服务器；")]),s._v(" "),a("p",[s._v("需要输入"),a("strong",[s._v("远程连接密码")]),s._v("，这个密码是第一次连接时会给你；")]),s._v(" "),a("p",[s._v("连接linux后，输入账户"),a("code",[s._v("root")]),s._v("，密码是"),a("strong",[s._v("实例密码")]),s._v("，")]),s._v(" "),a("p",[s._v("实例密码账户第一次登陆是没有的，需要重置实例密码，重置后重启实例即可生效；")]),s._v(" "),a("h2",{attrs:{id:"连接成功"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连接成功"}},[s._v("#")]),s._v(" 连接成功")]),s._v(" "),a("p",[s._v("提示如下文字证明连接服务器成功；")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Welcome to Alibaba Cloud Elastic Compute Service !\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"putty工具反空闲"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#putty工具反空闲"}},[s._v("#")]),s._v(" putty工具反空闲")]),s._v(" "),a("p",[s._v("服务器为了安全会在一段时间内没有数据操作时，断开连接；")]),s._v(" "),a("p",[s._v("所以我们使用PUTTY连接服务器时，为了防止自动断开，可以设置反空闲操作每隔N秒向服务器自动发送一条消息；")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("putty的设置方法：\nputty -> Connection -> Seconds between keepalives ( 0 to turn off ), 默认为0, 改为300\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"启动apache服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动apache服务"}},[s._v("#")]),s._v(" 启动Apache服务")]),s._v(" "),a("p",[s._v("套用官网DOC一条龙，顺利启动起服务；")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("安装Apache服务。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yum install -y httpd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("启动Apache服务。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("systemctl start httpd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("设置Apache服务开机自启动。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("systemctl enable httpd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("查询Apache服务是否处于运行中状态。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("systemctl status httpd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("p",[s._v("那怎么关闭Apache服务呢，这里再说几个常用的命令；")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("service httpd start // 启动\nservice httpd restart // 重新启动\nservice httpd stop // 停止服务\nrpm -e httpd  // Apache卸载\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h2",{attrs:{id:"启动nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动nginx"}},[s._v("#")]),s._v(" 启动Nginx")]),s._v(" "),a("p",[s._v("安装nginx前，需要先添加yum源，因为默认情况Centos中并无Nginx的源；")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("先安装yum-utils")]),s._v(" "),a("p",[s._v("这是一个管理repository及扩展包的工具；")])]),s._v(" "),a("li",[a("p",[s._v("添加源")]),s._v(" "),a("p",[a("code",[s._v("cd /etc/yum.repos.d/")]),s._v("目录下；")]),s._v(" "),a("p",[s._v("新建 "),a("code",[s._v("vim nginx.repo")]),s._v("文件，就增加了一个源文件信息;")]),s._v(" "),a("p",[s._v("然后输入以下内容：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[nginx-stable]\nname=nginx stable repo\nbaseurl=http://nginx.org/packages/centos/$releasever/$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://nginx.org/keys/nginx_signing.key\n\n[nginx-mainline]\nname=nginx mainline repo\nbaseurl=http://nginx.org/packages/mainline/centos/$releasever/$basearch/\ngpgcheck=1\nenabled=0\ngpgkey=https://nginx.org/keys/nginx_signing.key\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[a("p",[s._v("安装Nginx")]),s._v(" "),a("p",[s._v("先查看是否加源成功；")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yum search nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果成功，就开始通过yum安装；")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yum install nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("安装完毕后查看是否安装成功；")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("rpm -qa | grep nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这里说一下这个命令：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("rpm -qa|grep package-name \n\nrpm -qa\n列出所有被安装的rpm package\n\nrpm -q <rpm package name>\n查询 rpm package name 的包是否知被安装\n\n| 表示将输出结果（字符道串）转向到后面的命令处理\ngrep xxx 表示在当前结果中搜索包专含xxx字样的字符串\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("也就是查询是否有被安装的nginx包；")])]),s._v(" "),a("li",[a("p",[s._v("启动nginx")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("systemctl start nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("开机启动")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("systemctl enable nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("查看状态")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("systemctl status nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])])])]),s._v(" "),a("h2",{attrs:{id:"安装node环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装node环境"}},[s._v("#")]),s._v(" 安装node环境")]),s._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://github.com/nodesource/distributions",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/nodesource/distributions"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("这里介绍了linux安装地址；")])]),s._v(" "),a("p",[s._v("文件传输：（这里是下载10.X版本node）")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("curl -sL https://rpm.nodesource.com/setup_10.x | bash -\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("yum安装：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yum install -y nodejs\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("查看是否安装成功：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("node -v\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"安装mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装mysql"}},[s._v("#")]),s._v(" 安装mysql")]),s._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://segmentfault.com/a/1190000019507071",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://segmentfault.com/a/1190000019507071"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("这篇文章详细讲解了如何在linux下，安装mysql；")]),s._v(" "),a("p",[s._v("照步骤来即可；")]),s._v(" "),a("ol",[a("li",[s._v("添加yum源")]),s._v(" "),a("li",[a("code",[s._v("yum i mysql-community-server")]),s._v("安装")]),s._v(" "),a("li",[s._v("启动MySQL")]),s._v(" "),a("li",[s._v("修改密码")]),s._v(" "),a("li",[s._v("设置允许root远程访问")]),s._v(" "),a("li",[s._v("设置编码格式为UTF8")]),s._v(" "),a("li",[s._v("设置开机启动")])])]),s._v(" "),a("h3",{attrs:{id:"常用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[s._v("#")]),s._v(" 常用命令")]),s._v(" "),a("p",[s._v("启动")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("systemctl start mysqld.service\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("查看状态")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("systemctl status mysqld.service\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("停止")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("systemctl stop mysqld.service\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("重启")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("systemctl restart mysqld.service\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"授权问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#授权问题"}},[s._v("#")]),s._v(" 授权问题")]),s._v(" "),a("p",[s._v("1.mysql从8.0开始改变了授权语句，")]),s._v(" "),a("p",[s._v("之前版本使用的这个语句，现在会报错；")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY '123456' WITH GRANT OPTION;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("应该使用以下语句进行授权")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("grant all privileges on *.* to ‘root'@'%' ;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("但初始化设置时，可能会报错没有此用户授权权限，我们需要先创建root用户；")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("CREATE USER 'root'@'%' IDENTIFIED BY 'password';\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("2.navcat远程连接")]),s._v(" "),a("blockquote",[a("p",[s._v("会因为  Mysql远程连接报错：authentication plugin caching_sha2")]),s._v(" "),a("p",[s._v("mysql 8.0 默认使用 caching_sha2_password 身份验证机制 —— 从原来的 mysql_native_password 更改为 caching_sha2_password。")])]),s._v(" "),a("p",[s._v("这里修改身份验证方式的解决方案：")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("查看mysql版本")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("> select version();\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("查看当前默认的密码认证插件：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("show variables like 'default_authentication_plugin';\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("查看当前所有用户绑定的认证插件：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("select host,user,plugin from mysql.user;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("假如想更改 root 用户的认证方式")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" ALTER USER 'root'@'%' IDENTIFIED BY 'root' PASSWORD EXPIRE NEVER;\n# 更新用户密码\n> ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456';\n# 赋予 root 用户最高权限\n> grant all privileges on *.* to root@'%' with grant option;\n# 刷新权限\n> flush privileges;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"启动node项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动node项目"}},[s._v("#")]),s._v(" 启动node项目")]),s._v(" "),a("p",[s._v("安装pm2，可以直接启动dist目录下的server.js；")]),s._v(" "),a("h2",{attrs:{id:"mysql-down掉"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql-down掉"}},[s._v("#")]),s._v(" mysql down掉")]),s._v(" "),a("p",[s._v("现在发现mysql数据库，会在服务器间歇性停止、并重启；")]),s._v(" "),a("p",[s._v("这样造成了"),a("code",[s._v("serve")]),s._v("端，请求数据库时，报错"),a("code",[s._v("Error: Cannot enqueue Query after fatal error.")]),s._v("，提示致命错误；")]),s._v(" "),a("p",[s._v("初步debug，发现问题是，"),a("code",[s._v("serve")]),s._v("端代码只在初始化时连接了"),a("code",[s._v("mysql")]),s._v("数据库，并且没有执行关闭操作；")]),s._v(" "),a("p",[a("code",[s._v("serve")]),s._v("服务持续开启，但当"),a("code",[s._v("mysql")]),s._v("数据库重启后，"),a("code",[s._v("serve")]),s._v("连接的"),a("code",[s._v("mysql")]),s._v("实例并没有被释放，仍旧使用重启前的连接实例，进行请求，造成请求失败；")]),s._v(" "),a("h3",{attrs:{id:"目前解决方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#目前解决方法"}},[s._v("#")]),s._v(" 目前解决方法：")]),s._v(" "),a("p",[s._v("可以重启"),a("code",[s._v("serve")]),s._v("端服务，即可解决此问题；")]),s._v(" "),a("p",[s._v("后期考虑修改"),a("code",[s._v("serve")]),s._v("代码，以事务为原子模块，进行实时开关数据库的操作；")]),s._v(" "),a("p",[s._v("保证每次请求，都是重新连接当前的"),a("code",[s._v("mysql")]),s._v("服务。")])])}),[],!1,null,null,null);e.default=n.exports}}]);