(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{388:function(s,e,n){"use strict";n.r(e);var a=n(42),t=Object(a.a)({},(function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"vue-cli-概述"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli-概述"}},[s._v("#")]),s._v(" vue-cli 概述")]),s._v(" "),n("p",[s._v("Vue CLI 是一个基于 Vue.js 进行快速开发的完整系统；")]),s._v(" "),n("p",[s._v("作用就是让团队精简化 webpack 配置，不必过多精力放在配置上；")]),s._v(" "),n("p",[s._v("而是给开发者一定的默认配置，这些配置可以支持常规下的开发需求，并且也提供了可扩展的空间。")]),s._v(" "),n("p",[s._v("也就是说，用上 vue-cli4，你不用再纠结 webpack 配置了！")]),s._v(" "),n("p",[s._v("无论是生成项目结构，还是增加插件配置， 用我 vue-cli 封装的命令和配置规则就 ok。")]),s._v(" "),n("h2",{attrs:{id:"组成"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#组成"}},[s._v("#")]),s._v(" 组成")]),s._v(" "),n("p",[n("code",[s._v("vue-cli")]),s._v("脚手架也是由几部分单独模块构成；")]),s._v(" "),n("ul",[n("li",[n("h3",{attrs:{id:"cli"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cli"}},[s._v("#")]),s._v(" CLI")]),s._v(" "),n("p",[s._v("CLI ("),n("code",[s._v("@vue/cli")]),s._v(") 是一个全局安装的 npm 包，提供了终端里的 "),n("code",[s._v("vue")]),s._v(" 命令。")])]),s._v(" "),n("li",[n("h3",{attrs:{id:"cli-服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cli-服务"}},[s._v("#")]),s._v(" CLI 服务")]),s._v(" "),n("p",[s._v("CLI 服务 ("),n("code",[s._v("@vue/cli-service")]),s._v(") 是一个开发环境依赖。")])]),s._v(" "),n("li",[n("h3",{attrs:{id:"cli-插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cli-插件"}},[s._v("#")]),s._v(" CLI 插件")]),s._v(" "),n("p",[s._v("CLI 插件是向你的 Vue 项目提供可选功能的 npm 包，例如 Babel/TypeScript 转译、ESLint 集成、单元测试和 end-to-end 测试等。")])])]),s._v(" "),n("h2",{attrs:{id:"开发模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#开发模式"}},[s._v("#")]),s._v(" 开发模式")]),s._v(" "),n("p",[n("strong",[s._v("模式")]),s._v("是 Vue CLI 项目中一个重要的概念。默认情况下，一个 Vue CLI 项目有三个模式：")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("development")]),s._v(" 模式用于 "),n("code",[s._v("vue-cli-service serve")])]),s._v(" "),n("li",[n("code",[s._v("production")]),s._v(" 模式用于 "),n("code",[s._v("vue-cli-service build")]),s._v(" 和 "),n("code",[s._v("vue-cli-service test:e2e")])]),s._v(" "),n("li",[n("code",[s._v("test")]),s._v(" 模式用于 "),n("code",[s._v("vue-cli-service test:unit")])])]),s._v(" "),n("p",[s._v("所以我们在对应的模式中，可以直接使用全局变量"),n("code",[s._v("process.env.NODE_ENV")]),s._v("来区分当前模式；")]),s._v(" "),n("h2",{attrs:{id:"webpack-配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#webpack-配置"}},[s._v("#")]),s._v(" webpack 配置")]),s._v(" "),n("blockquote",[n("p",[s._v("详细介绍了"),n("a",{attrs:{href:"https://forum.vuejs.org/t/chainwebpack-configurewebpack/68750",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://forum.vuejs.org/t/chainwebpack-configurewebpack/68750"),n("OutboundLink")],1)])]),s._v(" "),n("h2",{attrs:{id:"插件使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#插件使用"}},[s._v("#")]),s._v(" 插件使用")]),s._v(" "),n("p",[s._v("vue-cli 因为是 webpack 的上层封装，所以在"),n("code",[s._v("vue.config.js")]),s._v("配置文件中的``configureWebpack"),n("code"),s._v("中")]),s._v(" "),n("p",[s._v("无缝支持了 webpack 的插件使用；")]),s._v(" "),n("p",[s._v("使用方法和 webpack 中一致，")]),s._v(" "),n("p",[s._v("webpack 中是在"),n("code",[s._v("webpack.config.js")]),s._v("中这样配置插件：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("const HtmlWebpackPlugin = require('html-webpack-plugin'); // 通过 npm 安装\nconst webpack = require('webpack'); // 用于访问内置插件\n\nconst config = {\n  plugins: [\n    new HtmlWebpackPlugin({template: './src/index.html'})\n  ]\n};\n\nmodule.exports = config;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("所以对等的来看"),n("code",[s._v("vue.config.js")]),s._v("中的配置：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// vue.config.js\nmodule.exports = {\n  configureWebpack: {\n    plugins: [\n      new MyAwesomeWebpackPlugin()\n    ]\n  }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("好吧，说白了"),n("code",[s._v("configureWebpack")]),s._v("就是对原"),n("code",[s._v("webpack.config.js")]),s._v("中配置的补充合并和覆盖；")]),s._v(" "),n("p",[s._v("在"),n("code",[s._v("vue.config.js")]),s._v("中以增量的形式去配置插件以及属性；")]),s._v(" "),n("p",[s._v("具体使用方法"),n("a",{attrs:{href:"https://cli.vuejs.org/zh/guide/webpack.html#%E7%AE%80%E5%8D%95%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方 Vue-cli 文档"),n("OutboundLink")],1),s._v("有很详细的介绍，不赘述；")]),s._v(" "),n("h2",{attrs:{id:"拆分打包文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#拆分打包文件"}},[s._v("#")]),s._v(" 拆分打包文件")]),s._v(" "),n("p",[s._v("默认 webpack 会将所有 node_modules 中引用的三方库打包进一个"),n("code",[s._v("vendors")]),s._v("文件包，")]),s._v(" "),n("p",[s._v("一个文件过大，常常超过 1~2mb，这样是不利于首页加载的；所以我们需要对三方库引入的包进行打包拆分；")]),s._v(" "),n("p",[s._v("这里使用"),n("code",[s._v("webpack")]),s._v("内置的拆分插件， "),n("code",[s._v("SplitChunksPlugin")]),s._v(";")]),s._v(" "),n("p",[s._v("这个插件功能强大，可以配置打包类型，打包方式，打包偏好（正则匹配文件），打包文件大小等；")]),s._v(" "),n("p",[s._v("下面是一个拆分配置示例：")]),s._v(" "),n("p",[s._v("着重说一下"),n("code",[s._v("chunks")]),s._v("和"),n("code",[s._v("cacheGroups")]),s._v("配置")]),s._v(" "),n("ul",[n("li",[n("p",[n("strong",[s._v("chunks:")])]),s._v(" "),n("p",[s._v("all: 不管文件是动态还是非动态载入，统一将文件分离。当页面首次载入会引入所有的包")]),s._v(" "),n("p",[s._v("async： 将异步加载的文件分离，首次一般不引入，到需要异步引入的组件才会引入。")]),s._v(" "),n("p",[s._v("initial：将异步和非异步的文件分离，如果一个文件被异步引入也被非异步引入，那它会被打包两次（注意和 all 区别），用于分离页面首次需要加载的包。")])]),s._v(" "),n("li",[n("h3",{attrs:{id:"cachegroups"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cachegroups"}},[s._v("#")]),s._v(" cacheGroups")]),s._v(" "),n("p",[s._v("用来定制分割包的规则，会继承和覆盖 splitChunks 的配置项；")]),s._v(" "),n("p",[s._v("priority：设置缓存组打包的优先级")]),s._v(" "),n("p",[s._v("test: 可以配置正则和写入 function 作为打包规则")]),s._v(" "),n("p",[s._v("chunks：打包类型")])])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("chainWebpack: config => {\n    // 忽略打包的模块\n    config.plugin('ignore').use(new webpack.IgnorePlugin(/^\\.\\/locale$/, /moment$/))\n\n    // 拆分打包文件\n    config.optimization.splitChunks({\n      chunks: 'all', // initial, async ,all三种拆分类型\n      minSize: 30000, // 形成一个新代码块最小的体积\n      maxAsyncRequests: 5, // 按需加载时最大的并行请求数\n      maxInitialRequests: 3, // 最大初始化请求数\n      automaticNameDelimiter: '~', // 打包分割符\n      name: true,\n      cacheGroups: {\n        commons: {\n          test: /[\\\\/]node_modules[\\\\/]/,\n          name: 'commons',\n          chunks: 'initial',\n          priority: 10,\n          minChunks: 2,\n        },\n        antdesigns: {\n          test: /[\\\\/]node_modules[\\\\/](@ant-design)[\\\\/]/,\n          name: 'antdesigns',\n          chunks: 'all',\n          priority: 20,\n        },\n        antdesignVue: {\n          test: /[\\\\/]node_modules[\\\\/](ant-design-vue)[\\\\/]/,\n          name: 'antdesingVue',\n          chunks: 'all',\n          priority: 30,\n        },\n      },\n    })\n  },\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br")])]),n("ul",[n("li")])])}),[],!1,null,null,null);e.default=t.exports}}]);