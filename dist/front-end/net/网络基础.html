<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTP2.X | BLOG</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/vbook/favicon.ico">
    <meta name="description" content="学习笔记">
    
    <link rel="preload" href="/vbook/assets/css/0.styles.5726f3cc.css" as="style"><link rel="preload" href="/vbook/assets/js/app.64803a45.js" as="script"><link rel="preload" href="/vbook/assets/js/2.dceffa7a.js" as="script"><link rel="preload" href="/vbook/assets/js/38.df2691ed.js" as="script"><link rel="prefetch" href="/vbook/assets/js/10.c8b41500.js"><link rel="prefetch" href="/vbook/assets/js/11.28c79869.js"><link rel="prefetch" href="/vbook/assets/js/12.602d258e.js"><link rel="prefetch" href="/vbook/assets/js/13.5225f803.js"><link rel="prefetch" href="/vbook/assets/js/14.86b3e846.js"><link rel="prefetch" href="/vbook/assets/js/15.020c6177.js"><link rel="prefetch" href="/vbook/assets/js/16.a5de8ab6.js"><link rel="prefetch" href="/vbook/assets/js/17.d4b4394b.js"><link rel="prefetch" href="/vbook/assets/js/18.5ac69d76.js"><link rel="prefetch" href="/vbook/assets/js/19.3ebe5320.js"><link rel="prefetch" href="/vbook/assets/js/20.ba80d828.js"><link rel="prefetch" href="/vbook/assets/js/21.993ca315.js"><link rel="prefetch" href="/vbook/assets/js/22.79c4804a.js"><link rel="prefetch" href="/vbook/assets/js/23.71cd2d95.js"><link rel="prefetch" href="/vbook/assets/js/24.1713254d.js"><link rel="prefetch" href="/vbook/assets/js/25.ee58070b.js"><link rel="prefetch" href="/vbook/assets/js/26.7d9e9d4c.js"><link rel="prefetch" href="/vbook/assets/js/27.77f61c94.js"><link rel="prefetch" href="/vbook/assets/js/28.04024ee9.js"><link rel="prefetch" href="/vbook/assets/js/29.5bcff1cd.js"><link rel="prefetch" href="/vbook/assets/js/3.3423f2fc.js"><link rel="prefetch" href="/vbook/assets/js/30.d1ca5e75.js"><link rel="prefetch" href="/vbook/assets/js/31.64668596.js"><link rel="prefetch" href="/vbook/assets/js/32.0b2d1e6f.js"><link rel="prefetch" href="/vbook/assets/js/33.5a061f89.js"><link rel="prefetch" href="/vbook/assets/js/34.2e3c7ab2.js"><link rel="prefetch" href="/vbook/assets/js/35.7218c247.js"><link rel="prefetch" href="/vbook/assets/js/36.60fc61bd.js"><link rel="prefetch" href="/vbook/assets/js/37.a14c1b7b.js"><link rel="prefetch" href="/vbook/assets/js/39.463ecbf5.js"><link rel="prefetch" href="/vbook/assets/js/4.d9efc253.js"><link rel="prefetch" href="/vbook/assets/js/40.f16d5670.js"><link rel="prefetch" href="/vbook/assets/js/41.65ce97f3.js"><link rel="prefetch" href="/vbook/assets/js/42.ccd3754e.js"><link rel="prefetch" href="/vbook/assets/js/43.fdc58166.js"><link rel="prefetch" href="/vbook/assets/js/44.aa0425dc.js"><link rel="prefetch" href="/vbook/assets/js/45.28e1b46e.js"><link rel="prefetch" href="/vbook/assets/js/46.9f678d14.js"><link rel="prefetch" href="/vbook/assets/js/47.5f63502f.js"><link rel="prefetch" href="/vbook/assets/js/48.07651b39.js"><link rel="prefetch" href="/vbook/assets/js/5.6b3bdc86.js"><link rel="prefetch" href="/vbook/assets/js/6.c9f44ce5.js"><link rel="prefetch" href="/vbook/assets/js/7.c95ece88.js"><link rel="prefetch" href="/vbook/assets/js/8.e5718fb1.js"><link rel="prefetch" href="/vbook/assets/js/9.ba545b0a.js">
    <link rel="stylesheet" href="/vbook/assets/css/0.styles.5726f3cc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vbook/" class="home-link router-link-active"><!----> <span class="site-name">BLOG</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习笔记" class="dropdown-title"><span class="title">前端学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端学习笔记" class="mobile-dropdown-title"><span class="title">前端学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vbook/front-end/evo/优化方式.html" class="nav-link">
  前端优化
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/js/es6知识.html" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/vue/vue知识点.html" class="nav-link">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/webpack/webpack基础.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/net/网络基础.html" class="nav-link">
  网络基础
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/tools/GIT.html" class="nav-link">
  开发工具
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/ci/travis自动部署.html" class="nav-link">
  前端自动化
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后台学习笔记" class="dropdown-title"><span class="title">后台学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="后台学习笔记" class="mobile-dropdown-title"><span class="title">后台学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vbook/back-end/node/express.html" class="nav-link">
  NodeJS
</a></li><li class="dropdown-item"><!----> <a href="/vbook/back-end/lib-web/RESTful.html" class="nav-link">
  web开发知识
</a></li><li class="dropdown-item"><!----> <a href="/vbook/back-end/server/Nginx.html" class="nav-link">
  服务器
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JustDoIT" class="dropdown-title"><span class="title">JustDoIT</span> <span class="arrow down"></span></button> <button type="button" aria-label="JustDoIT" class="mobile-dropdown-title"><span class="title">JustDoIT</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vbook/funs/hardware/arduino.html" class="nav-link">
  硬件
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习笔记" class="dropdown-title"><span class="title">前端学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端学习笔记" class="mobile-dropdown-title"><span class="title">前端学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vbook/front-end/evo/优化方式.html" class="nav-link">
  前端优化
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/js/es6知识.html" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/vue/vue知识点.html" class="nav-link">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/webpack/webpack基础.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/net/网络基础.html" class="nav-link">
  网络基础
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/tools/GIT.html" class="nav-link">
  开发工具
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/ci/travis自动部署.html" class="nav-link">
  前端自动化
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后台学习笔记" class="dropdown-title"><span class="title">后台学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="后台学习笔记" class="mobile-dropdown-title"><span class="title">后台学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vbook/back-end/node/express.html" class="nav-link">
  NodeJS
</a></li><li class="dropdown-item"><!----> <a href="/vbook/back-end/lib-web/RESTful.html" class="nav-link">
  web开发知识
</a></li><li class="dropdown-item"><!----> <a href="/vbook/back-end/server/Nginx.html" class="nav-link">
  服务器
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JustDoIT" class="dropdown-title"><span class="title">JustDoIT</span> <span class="arrow down"></span></button> <button type="button" aria-label="JustDoIT" class="mobile-dropdown-title"><span class="title">JustDoIT</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vbook/funs/hardware/arduino.html" class="nav-link">
  硬件
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>网络基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vbook/front-end/net/网络基础.html" class="active sidebar-link">网络基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vbook/front-end/net/网络基础.html#http2-x" class="sidebar-link">HTTP2.X</a></li><li class="sidebar-sub-header"><a href="/vbook/front-end/net/网络基础.html#tcp-和-udp" class="sidebar-link">TCP 和 UDP</a></li><li class="sidebar-sub-header"><a href="/vbook/front-end/net/网络基础.html#三次握手-四次挥手" class="sidebar-link">三次握手/四次挥手</a></li><li class="sidebar-sub-header"><a href="/vbook/front-end/net/网络基础.html#浏览器解析" class="sidebar-link">浏览器解析</a></li><li class="sidebar-sub-header"><a href="/vbook/front-end/net/网络基础.html#浏览器渲染" class="sidebar-link">浏览器渲染</a></li><li class="sidebar-sub-header"><a href="/vbook/front-end/net/网络基础.html#dns-解析" class="sidebar-link">DNS 解析</a></li><li class="sidebar-sub-header"><a href="/vbook/front-end/net/网络基础.html#tcp-ip" class="sidebar-link">TCP/IP</a></li><li class="sidebar-sub-header"><a href="/vbook/front-end/net/网络基础.html#nat-网络地址转换" class="sidebar-link">NAT 网络地址转换</a></li><li class="sidebar-sub-header"><a href="/vbook/front-end/net/网络基础.html#网关和路由器" class="sidebar-link">网关和路由器</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="http2-x"><a href="#http2-x" class="header-anchor">#</a> HTTP2.X</h2> <ul><li><h3 id="http1-1"><a href="#http1-1" class="header-anchor">#</a> HTTP1.1</h3> <ul><li><p><strong>缓存处理</strong></p> <p>在 HTTP1.0 中主要使用 header 里的 If-Modified-Since,Expires 来做为缓存判断的标准，HTTP1.1 则引入了更多的缓存控制策略例如 Entity tag，If-Unmodified-Since, If-Match, If-None-Match 等更多可供选择的缓存头来控制缓存策略。</p></li> <li><p><strong>带宽优化</strong></p></li> <li><p><strong>长连接</strong></p> <p>在 HTTP1.1 中默认开启 Connection： keep-alive，弥补 HTTP 的效率缺点；</p> <blockquote><p>当一个网页打开完成后，客户端和服务器之间用于传输 HTTP 数据的 TCP 连接不会关闭，如果客户端再次访问这个服务器上的网页，会继续使用这一条已经建立的连接</p></blockquote></li></ul></li> <li><h3 id="http2-0"><a href="#http2-0" class="header-anchor">#</a> HTTP2.0</h3> <ul><li><p><strong>多路复用</strong></p> <p>即连接共享，即每一个 request 都是是用作连接共享机制；</p> <p>HTTP/2 通过让所有数据流共用同一个连接，可以更有效地使用 TCP 连接，让高带宽也能真正的服务于 HTTP 的性能提升。</p></li> <li><h3 id="二进制传输"><a href="#二进制传输" class="header-anchor">#</a> 二进制传输</h3> <p>在 HTTP1.x 中，我们是通过文本的方式传输数据。文本的表现形式有多样性，因此要做到健壮性考虑的场景必然有很多，但是二进制则不同，只有 0 和 1 的组合；</p> <p>因此选择了二进制传输，实现方便且健壮。</p></li> <li><h3 id="header-压缩"><a href="#header-压缩" class="header-anchor">#</a> Header 压缩</h3> <p>在 HTTP2.0 中，我们使用了 HPACK（HTTP2 头部压缩算法）压缩格式对传输的 header 进行编码，减少了 header 的大小。</p> <p>并在两端维护了索引表，用于记录出现过的 header，后面在传输过程中就可以传输已经记录过的 header 的键名，对端收到数据后就可以通过键名找到对应的值。</p></li></ul></li></ul> <h2 id="tcp-和-udp"><a href="#tcp-和-udp" class="header-anchor">#</a> TCP 和 UDP</h2> <ul><li><p>TCP 提供可靠的服务。也就是说，通过 TCP 连接传送的数据，无差错，不丢失，不重复，且按序到达;</p> <p>UDP 尽最大努力交付，即不保证可靠交付</p></li> <li><p>TCP 的逻辑通信信道是全双工的可靠信道，UDP 则是不可靠信道</p></li></ul> <h2 id="三次握手-四次挥手"><a href="#三次握手-四次挥手" class="header-anchor">#</a> 三次握手/四次挥手</h2> <ul><li><p>三次握手，主要为了互相确认已经建立了链接，并都能收到并响应；</p> <p>请求链接 -》 服务端回应 -》 客户端回应</p></li> <li><p>四次挥手，主要为了确认已关闭链接</p> <p>请求关闭 -》 服务端回应（客户端停止发送消息，服务端停止监听） -》 服务端回应（服务端停止响应） -》 客户端回应（客户端停止监听服务端消息） -》 断开链接</p></li></ul> <h2 id="浏览器解析"><a href="#浏览器解析" class="header-anchor">#</a> 浏览器解析</h2> <ol><li>浏览器输入并发送 URL；</li> <li>URL 解析/DNS 解析查找域名 IP 地址；（DNS 解析）</li> <li>网络连接发起 HTTP 请求</li> <li>HTTP 报文传输过程</li> <li>客户端接收服务端响应资源；</li> <li>客户端浏览器进行资源的加载/渲染</li> <li>浏览器绘制页面；</li></ol> <h2 id="浏览器渲染"><a href="#浏览器渲染" class="header-anchor">#</a> 浏览器渲染</h2> <p>从耗时的角度，浏览器请求、加载、渲染一个页面，时间花在下面<a href="http://link.zhihu.com/?target=https%3A//developers.google.com/speed/docs/insights/mobile" target="_blank" rel="noopener noreferrer">五件事情<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>上：</p> <ol><li><p>DNS 查询</p></li> <li><p>TCP 连接</p></li> <li><p>HTTP 请求即响应</p></li> <li><p>服务器响应</p></li> <li><p>客户端渲染</p> <p>客户端渲染，即浏览器解析渲染过程，大致为：</p> <ol><li>处理 HTML 标记并构建 DOM 树。</li> <li>处理 CSS 标记并构建 CSSOM 树。</li> <li>将 DOM 与 CSSOM 合并成一个渲染树。</li> <li>根据渲染树来布局，以计算每个节点的几何信息。</li> <li>将各个节点绘制到屏幕上。</li></ol></li></ol> <h2 id="dns-解析"><a href="#dns-解析" class="header-anchor">#</a> DNS 解析</h2> <ol><li><p>检查浏览器缓存中是否缓存过该域名对应的 IP 地址；</p></li> <li><p>如果浏览器缓存没有，那么就检查本地操作系统的 hosts 文件；</p></li> <li><p>如果本地文件没有，就会查询本地 DNS 服务器（当地网络提供商）；</p> <p><strong>基本在这里完成 80%的域名解析；</strong></p></li> <li><p>再不行，就直接到根域名请求解析，然后再依次遍历到指定的根节点；</p></li> <li><p>最终将指定域名 DNS 服务器的查询结果，缓存到本地；</p></li></ol> <h2 id="tcp-ip"><a href="#tcp-ip" class="header-anchor">#</a> TCP/IP</h2> <p>IP 的理解</p> <h3 id="什么是公网-ip-外网-ip"><a href="#什么是公网-ip-外网-ip" class="header-anchor">#</a> 什么是公网 IP（外网 IP）</h3> <p>公网 IP 就是除了保留 IP 地址以外的 IP 地址，可以与 Internet 上的其他计算机随意互相访问。</p> <p>我们通常所说的 IP 地址，其实就是指的服务商提供的公网 IP。</p> <p>互联网上的每台计算机都有一个独立的 IP 地址，该 IP 地址唯一确定互联网上的一台计算机。这里的 IP 地址就是指的公网 IP 地址。</p> <h3 id="什么是内网-ip"><a href="#什么是内网-ip" class="header-anchor">#</a> 什么是内网 IP</h3> <p>首先一般常用内网 IP 地址都是这种形式的：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>起始 IP 10.0.0.0 - 结束 IP 10.255.255.255
起始 IP 172.16.0.0 - 结束 IP 172.31.255.255
起始 IP 192.168.0.0 - 结束 IP 192.168.255.255
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>无论是一些小型企业还是学校，通常都是只申请一个或少数几个固定的公网 IP 地址（打比方，相对少），</p> <p>但是内部需要连接互联网的机器很多，难道都使用一个 IP 地址？那不就 IP 冲突了吗。</p> <p>不，这时候就需要使用内网 IP 了，内网 IP 也就是相对于局域网来说的；</p> <p>比如一个小企业有 10 台电脑，只有一个公网 IP；</p> <p>10 台电脑分配的内网 IP，为<code>192.168.0.1~192.168.0.10</code>;</p> <h3 id="内网-ip-如何访问外网"><a href="#内网-ip-如何访问外网" class="header-anchor">#</a> 内网 IP 如何访问外网</h3> <p>例如 A 电脑和 B 电脑，同时通过各自的 80 端口打开网页，向百度发送请求；</p> <p>那么即通过内网 IP<code>192.168.0.1:80</code>和<code>192.168.0.2:80</code>，向<code>www.baidu.com</code>发送请求，这是内网是无法直接访问互联网的；</p> <p>是先将请求数据到达<strong>NAT 网络地址转换</strong>，它将这两个访问的源地址改为一个公网地址（例如 1.85.185.885），将端口映射改为空闲的端口 8080 和 8081；</p> <p>所以最终不是内网 IP 对外访问了 internet，而是外网 IP<code>1.85.185.885</code>的两个端口<code>8080 8081</code>发起了请求；</p> <p>百度服务器会对这两个公网端口进行数据响应，NAT 在进行逆向转换，将数据发送回内网 IP。</p> <p>这就完成了内网 IP 访问互联网的过程。</p> <h2 id="nat-网络地址转换"><a href="#nat-网络地址转换" class="header-anchor">#</a> NAT 网络地址转换</h2> <p>NAT 是 网络地址转换(Network Address Translation) 的缩写；</p> <p>NAT 实际上就是为了解决 IPv4 地址供不应求的问题而诞生的，</p> <p>NAT 会自动地将每一台 PC 在内网的 LAN IP 地址, 在离开防火墙时转换为公网的 IP 地址｡ 此外,当数据包返回时, 也将进行逆向的转换｡</p> <p>内网 IP 就是房间号，公网 IP 就是位置坐标；</p> <p>NAT 将房间号拼接转换为具体位置坐标加房间号，来访问外网，也保证了本机 PC 的 IP 唯一性（公网 IP+内网 IP = 唯一 IP）；</p> <h2 id="网关和路由器"><a href="#网关和路由器" class="header-anchor">#</a> 网关和路由器</h2> <p>网关和路由器最大的区别是是否连接相似的网络。</p> <ul><li>如果连接相似的网络，则称为<strong>路由器</strong>。</li> <li>而连接不相似的网络，称为<strong>网关</strong>。</li></ul> <p>相似的网络和不相似的网络有两种不同的含义。
逻辑层面：
<strong>相似的网络</strong>：如果都是互联网上的两个网络，我们称为相似的网络。</p> <p>不相似的网络：如果一个是私网，一个是公网。我们称为不相似的网络。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/vbook/assets/js/app.64803a45.js" defer></script><script src="/vbook/assets/js/2.dceffa7a.js" defer></script><script src="/vbook/assets/js/38.df2691ed.js" defer></script>
  </body>
</html>
