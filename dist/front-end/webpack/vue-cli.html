<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue-cli 概述 | BLOG</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/vuepress/favicon.ico">
    <meta name="description" content="学习笔记">
    <link rel="preload" href="/vuepress/assets/css/0.styles.a1d845f0.css" as="style"><link rel="preload" href="/vuepress/assets/js/app.698edf64.js" as="script"><link rel="preload" href="/vuepress/assets/js/2.2ce5df5b.js" as="script"><link rel="preload" href="/vuepress/assets/js/42.48670cce.js" as="script"><link rel="prefetch" href="/vuepress/assets/js/10.09b2ea05.js"><link rel="prefetch" href="/vuepress/assets/js/11.c69ee5aa.js"><link rel="prefetch" href="/vuepress/assets/js/12.1f170326.js"><link rel="prefetch" href="/vuepress/assets/js/13.1883e67e.js"><link rel="prefetch" href="/vuepress/assets/js/14.55d29b4e.js"><link rel="prefetch" href="/vuepress/assets/js/15.b571d130.js"><link rel="prefetch" href="/vuepress/assets/js/16.cbf4423a.js"><link rel="prefetch" href="/vuepress/assets/js/17.0ecae00f.js"><link rel="prefetch" href="/vuepress/assets/js/18.8a452ec9.js"><link rel="prefetch" href="/vuepress/assets/js/19.0022a899.js"><link rel="prefetch" href="/vuepress/assets/js/20.e82790c5.js"><link rel="prefetch" href="/vuepress/assets/js/21.ef1a1af6.js"><link rel="prefetch" href="/vuepress/assets/js/22.c1aad3a2.js"><link rel="prefetch" href="/vuepress/assets/js/23.f403526b.js"><link rel="prefetch" href="/vuepress/assets/js/24.d3cc9450.js"><link rel="prefetch" href="/vuepress/assets/js/25.8f1830d8.js"><link rel="prefetch" href="/vuepress/assets/js/26.3a75cf4e.js"><link rel="prefetch" href="/vuepress/assets/js/27.e3af81ba.js"><link rel="prefetch" href="/vuepress/assets/js/28.c1867c81.js"><link rel="prefetch" href="/vuepress/assets/js/29.2ba9a3bd.js"><link rel="prefetch" href="/vuepress/assets/js/3.dfccb20d.js"><link rel="prefetch" href="/vuepress/assets/js/30.8ddcfe76.js"><link rel="prefetch" href="/vuepress/assets/js/31.7e828e57.js"><link rel="prefetch" href="/vuepress/assets/js/32.91359916.js"><link rel="prefetch" href="/vuepress/assets/js/33.b29c47e5.js"><link rel="prefetch" href="/vuepress/assets/js/34.4f154d4c.js"><link rel="prefetch" href="/vuepress/assets/js/35.25e2d8d4.js"><link rel="prefetch" href="/vuepress/assets/js/36.29df960a.js"><link rel="prefetch" href="/vuepress/assets/js/37.f9ec995f.js"><link rel="prefetch" href="/vuepress/assets/js/38.b100008f.js"><link rel="prefetch" href="/vuepress/assets/js/39.5794a728.js"><link rel="prefetch" href="/vuepress/assets/js/4.d599a372.js"><link rel="prefetch" href="/vuepress/assets/js/40.b4c2b4e9.js"><link rel="prefetch" href="/vuepress/assets/js/41.b79940a3.js"><link rel="prefetch" href="/vuepress/assets/js/43.9251067b.js"><link rel="prefetch" href="/vuepress/assets/js/44.d9be37b6.js"><link rel="prefetch" href="/vuepress/assets/js/45.e3dee9cd.js"><link rel="prefetch" href="/vuepress/assets/js/5.525c50d0.js"><link rel="prefetch" href="/vuepress/assets/js/6.386e2672.js"><link rel="prefetch" href="/vuepress/assets/js/7.d4dd4b8a.js"><link rel="prefetch" href="/vuepress/assets/js/8.f7bedf91.js"><link rel="prefetch" href="/vuepress/assets/js/9.721f3546.js">
    <link rel="stylesheet" href="/vuepress/assets/css/0.styles.a1d845f0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress/" class="home-link router-link-active"><!----> <span class="site-name">BLOG</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习笔记" class="dropdown-title"><span class="title">前端学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端学习笔记" class="mobile-dropdown-title"><span class="title">前端学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/front-end/evo/优化方式.html" class="nav-link">
  前端优化
</a></li><li class="dropdown-item"><!----> <a href="/vuepress/front-end/js/es6知识.html" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/vuepress/front-end/vue/vue知识点.html" class="nav-link">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/vuepress/front-end/webpack/webpack基础.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/vuepress/front-end/net/网络基础.html" class="nav-link">
  网络基础
</a></li><li class="dropdown-item"><!----> <a href="/vuepress/front-end/tools/GIT.html" class="nav-link">
  开发工具
</a></li><li class="dropdown-item"><!----> <a href="/vuepress/front-end/ci/travis自动部署.html" class="nav-link">
  前端自动化
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后台学习笔记" class="dropdown-title"><span class="title">后台学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="后台学习笔记" class="mobile-dropdown-title"><span class="title">后台学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/back-end/node/express.html" class="nav-link">
  NodeJS
</a></li><li class="dropdown-item"><!----> <a href="/vuepress/back-end/lib-web/RESTful.html" class="nav-link">
  web开发知识
</a></li><li class="dropdown-item"><!----> <a href="/vuepress/back-end/server/Nginx.html" class="nav-link">
  服务器
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JustDoIT" class="dropdown-title"><span class="title">JustDoIT</span> <span class="arrow down"></span></button> <button type="button" aria-label="JustDoIT" class="mobile-dropdown-title"><span class="title">JustDoIT</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/funs/hardware/arduino.html" class="nav-link">
  硬件
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习笔记" class="dropdown-title"><span class="title">前端学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端学习笔记" class="mobile-dropdown-title"><span class="title">前端学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/front-end/evo/优化方式.html" class="nav-link">
  前端优化
</a></li><li class="dropdown-item"><!----> <a href="/vuepress/front-end/js/es6知识.html" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/vuepress/front-end/vue/vue知识点.html" class="nav-link">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/vuepress/front-end/webpack/webpack基础.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/vuepress/front-end/net/网络基础.html" class="nav-link">
  网络基础
</a></li><li class="dropdown-item"><!----> <a href="/vuepress/front-end/tools/GIT.html" class="nav-link">
  开发工具
</a></li><li class="dropdown-item"><!----> <a href="/vuepress/front-end/ci/travis自动部署.html" class="nav-link">
  前端自动化
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后台学习笔记" class="dropdown-title"><span class="title">后台学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="后台学习笔记" class="mobile-dropdown-title"><span class="title">后台学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/back-end/node/express.html" class="nav-link">
  NodeJS
</a></li><li class="dropdown-item"><!----> <a href="/vuepress/back-end/lib-web/RESTful.html" class="nav-link">
  web开发知识
</a></li><li class="dropdown-item"><!----> <a href="/vuepress/back-end/server/Nginx.html" class="nav-link">
  服务器
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JustDoIT" class="dropdown-title"><span class="title">JustDoIT</span> <span class="arrow down"></span></button> <button type="button" aria-label="JustDoIT" class="mobile-dropdown-title"><span class="title">JustDoIT</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/funs/hardware/arduino.html" class="nav-link">
  硬件
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>webpack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress/front-end/webpack/webpack基础.html" class="sidebar-link">webpack基础</a></li><li><a href="/vuepress/front-end/webpack/vue-cli.html" aria-current="page" class="active sidebar-link">vue-cli</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress/front-end/webpack/vue-cli.html#vue-cli-概述" class="sidebar-link">vue-cli 概述</a></li><li class="sidebar-sub-header"><a href="/vuepress/front-end/webpack/vue-cli.html#组成" class="sidebar-link">组成</a></li><li class="sidebar-sub-header"><a href="/vuepress/front-end/webpack/vue-cli.html#开发模式" class="sidebar-link">开发模式</a></li><li class="sidebar-sub-header"><a href="/vuepress/front-end/webpack/vue-cli.html#webpack-配置" class="sidebar-link">webpack 配置</a></li><li class="sidebar-sub-header"><a href="/vuepress/front-end/webpack/vue-cli.html#插件使用" class="sidebar-link">插件使用</a></li><li class="sidebar-sub-header"><a href="/vuepress/front-end/webpack/vue-cli.html#拆分打包文件" class="sidebar-link">拆分打包文件</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="vue-cli-概述"><a href="#vue-cli-概述" class="header-anchor">#</a> vue-cli 概述</h2> <p>Vue CLI 是一个基于 Vue.js 进行快速开发的完整系统；</p> <p>作用就是让团队精简化 webpack 配置，不必过多精力放在配置上；</p> <p>而是给开发者一定的默认配置，这些配置可以支持常规下的开发需求，并且也提供了可扩展的空间。</p> <p>也就是说，用上 vue-cli4，你不用再纠结 webpack 配置了！</p> <p>无论是生成项目结构，还是增加插件配置， 用我 vue-cli 封装的命令和配置规则就 ok。</p> <h2 id="组成"><a href="#组成" class="header-anchor">#</a> 组成</h2> <p><code>vue-cli</code>脚手架也是由几部分单独模块构成；</p> <ul><li><h3 id="cli"><a href="#cli" class="header-anchor">#</a> CLI</h3> <p>CLI (<code>@vue/cli</code>) 是一个全局安装的 npm 包，提供了终端里的 <code>vue</code> 命令。</p></li> <li><h3 id="cli-服务"><a href="#cli-服务" class="header-anchor">#</a> CLI 服务</h3> <p>CLI 服务 (<code>@vue/cli-service</code>) 是一个开发环境依赖。</p></li> <li><h3 id="cli-插件"><a href="#cli-插件" class="header-anchor">#</a> CLI 插件</h3> <p>CLI 插件是向你的 Vue 项目提供可选功能的 npm 包，例如 Babel/TypeScript 转译、ESLint 集成、单元测试和 end-to-end 测试等。</p></li></ul> <h2 id="开发模式"><a href="#开发模式" class="header-anchor">#</a> 开发模式</h2> <p><strong>模式</strong>是 Vue CLI 项目中一个重要的概念。默认情况下，一个 Vue CLI 项目有三个模式：</p> <ul><li><code>development</code> 模式用于 <code>vue-cli-service serve</code></li> <li><code>production</code> 模式用于 <code>vue-cli-service build</code> 和 <code>vue-cli-service test:e2e</code></li> <li><code>test</code> 模式用于 <code>vue-cli-service test:unit</code></li></ul> <p>所以我们在对应的模式中，可以直接使用全局变量<code>process.env.NODE_ENV</code>来区分当前模式；</p> <h2 id="webpack-配置"><a href="#webpack-配置" class="header-anchor">#</a> webpack 配置</h2> <blockquote><p>详细介绍了<a href="https://forum.vuejs.org/t/chainwebpack-configurewebpack/68750" target="_blank" rel="noopener noreferrer">https://forum.vuejs.org/t/chainwebpack-configurewebpack/68750<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h2 id="插件使用"><a href="#插件使用" class="header-anchor">#</a> 插件使用</h2> <p>vue-cli 因为是 webpack 的上层封装，所以在<code>vue.config.js</code>配置文件中的``configureWebpack<code></code>中</p> <p>无缝支持了 webpack 的插件使用；</p> <p>使用方法和 webpack 中一致，</p> <p>webpack 中是在<code>webpack.config.js</code>中这样配置插件：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const HtmlWebpackPlugin = require('html-webpack-plugin'); // 通过 npm 安装
const webpack = require('webpack'); // 用于访问内置插件

const config = {
  plugins: [
    new HtmlWebpackPlugin({template: './src/index.html'})
  ]
};

module.exports = config;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>所以对等的来看<code>vue.config.js</code>中的配置：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// vue.config.js
module.exports = {
  configureWebpack: {
    plugins: [
      new MyAwesomeWebpackPlugin()
    ]
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>好吧，说白了<code>configureWebpack</code>就是对原<code>webpack.config.js</code>中配置的补充合并和覆盖；</p> <p>在<code>vue.config.js</code>中以增量的形式去配置插件以及属性；</p> <p>具体使用方法<a href="https://cli.vuejs.org/zh/guide/webpack.html#%E7%AE%80%E5%8D%95%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F" target="_blank" rel="noopener noreferrer">官方 Vue-cli 文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>有很详细的介绍，不赘述；</p> <h2 id="拆分打包文件"><a href="#拆分打包文件" class="header-anchor">#</a> 拆分打包文件</h2> <p>默认 webpack 会将所有 node_modules 中引用的三方库打包进一个<code>vendors</code>文件包，</p> <p>一个文件过大，常常超过 1~2mb，这样是不利于首页加载的；所以我们需要对三方库引入的包进行打包拆分；</p> <p>这里使用<code>webpack</code>内置的拆分插件， <code>SplitChunksPlugin</code>;</p> <p>这个插件功能强大，可以配置打包类型，打包方式，打包偏好（正则匹配文件），打包文件大小等；</p> <p>下面是一个拆分配置示例：</p> <p>着重说一下<code>chunks</code>和<code>cacheGroups</code>配置</p> <ul><li><p><strong>chunks:</strong></p> <p>all: 不管文件是动态还是非动态载入，统一将文件分离。当页面首次载入会引入所有的包</p> <p>async： 将异步加载的文件分离，首次一般不引入，到需要异步引入的组件才会引入。</p> <p>initial：将异步和非异步的文件分离，如果一个文件被异步引入也被非异步引入，那它会被打包两次（注意和 all 区别），用于分离页面首次需要加载的包。</p></li> <li><h3 id="cachegroups"><a href="#cachegroups" class="header-anchor">#</a> cacheGroups</h3> <p>用来定制分割包的规则，会继承和覆盖 splitChunks 的配置项；</p> <p>priority：设置缓存组打包的优先级</p> <p>test: 可以配置正则和写入 function 作为打包规则</p> <p>chunks：打包类型</p></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>chainWebpack: config =&gt; {
    // 忽略打包的模块
    config.plugin('ignore').use(new webpack.IgnorePlugin(/^\.\/locale$/, /moment$/))

    // 拆分打包文件
    config.optimization.splitChunks({
      chunks: 'all', // initial, async ,all三种拆分类型
      minSize: 30000, // 形成一个新代码块最小的体积
      maxAsyncRequests: 5, // 按需加载时最大的并行请求数
      maxInitialRequests: 3, // 最大初始化请求数
      automaticNameDelimiter: '~', // 打包分割符
      name: true,
      cacheGroups: {
        commons: {
          test: /[\\/]node_modules[\\/]/,
          name: 'commons',
          chunks: 'initial',
          priority: 10,
          minChunks: 2,
        },
        antdesigns: {
          test: /[\\/]node_modules[\\/](@ant-design)[\\/]/,
          name: 'antdesigns',
          chunks: 'all',
          priority: 20,
        },
        antdesignVue: {
          test: /[\\/]node_modules[\\/](ant-design-vue)[\\/]/,
          name: 'antdesingVue',
          chunks: 'all',
          priority: 30,
        },
      },
    })
  },
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><ul><li></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vuepress/front-end/webpack/webpack基础.html" class="prev">
        webpack基础
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vuepress/assets/js/app.698edf64.js" defer></script><script src="/vuepress/assets/js/2.2ce5df5b.js" defer></script><script src="/vuepress/assets/js/42.48670cce.js" defer></script>
  </body>
</html>
