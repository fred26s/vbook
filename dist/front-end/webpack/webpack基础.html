<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack | BLOG</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/vbook/favicon.ico">
    <meta name="description" content="学习笔记">
    
    <link rel="preload" href="/vbook/assets/css/0.styles.5726f3cc.css" as="style"><link rel="preload" href="/vbook/assets/js/app.64803a45.js" as="script"><link rel="preload" href="/vbook/assets/js/2.dceffa7a.js" as="script"><link rel="preload" href="/vbook/assets/js/46.9f678d14.js" as="script"><link rel="prefetch" href="/vbook/assets/js/10.c8b41500.js"><link rel="prefetch" href="/vbook/assets/js/11.28c79869.js"><link rel="prefetch" href="/vbook/assets/js/12.602d258e.js"><link rel="prefetch" href="/vbook/assets/js/13.5225f803.js"><link rel="prefetch" href="/vbook/assets/js/14.86b3e846.js"><link rel="prefetch" href="/vbook/assets/js/15.020c6177.js"><link rel="prefetch" href="/vbook/assets/js/16.a5de8ab6.js"><link rel="prefetch" href="/vbook/assets/js/17.d4b4394b.js"><link rel="prefetch" href="/vbook/assets/js/18.5ac69d76.js"><link rel="prefetch" href="/vbook/assets/js/19.3ebe5320.js"><link rel="prefetch" href="/vbook/assets/js/20.ba80d828.js"><link rel="prefetch" href="/vbook/assets/js/21.993ca315.js"><link rel="prefetch" href="/vbook/assets/js/22.79c4804a.js"><link rel="prefetch" href="/vbook/assets/js/23.71cd2d95.js"><link rel="prefetch" href="/vbook/assets/js/24.1713254d.js"><link rel="prefetch" href="/vbook/assets/js/25.ee58070b.js"><link rel="prefetch" href="/vbook/assets/js/26.7d9e9d4c.js"><link rel="prefetch" href="/vbook/assets/js/27.77f61c94.js"><link rel="prefetch" href="/vbook/assets/js/28.04024ee9.js"><link rel="prefetch" href="/vbook/assets/js/29.5bcff1cd.js"><link rel="prefetch" href="/vbook/assets/js/3.3423f2fc.js"><link rel="prefetch" href="/vbook/assets/js/30.d1ca5e75.js"><link rel="prefetch" href="/vbook/assets/js/31.64668596.js"><link rel="prefetch" href="/vbook/assets/js/32.0b2d1e6f.js"><link rel="prefetch" href="/vbook/assets/js/33.5a061f89.js"><link rel="prefetch" href="/vbook/assets/js/34.2e3c7ab2.js"><link rel="prefetch" href="/vbook/assets/js/35.7218c247.js"><link rel="prefetch" href="/vbook/assets/js/36.60fc61bd.js"><link rel="prefetch" href="/vbook/assets/js/37.a14c1b7b.js"><link rel="prefetch" href="/vbook/assets/js/38.df2691ed.js"><link rel="prefetch" href="/vbook/assets/js/39.463ecbf5.js"><link rel="prefetch" href="/vbook/assets/js/4.d9efc253.js"><link rel="prefetch" href="/vbook/assets/js/40.f16d5670.js"><link rel="prefetch" href="/vbook/assets/js/41.65ce97f3.js"><link rel="prefetch" href="/vbook/assets/js/42.ccd3754e.js"><link rel="prefetch" href="/vbook/assets/js/43.fdc58166.js"><link rel="prefetch" href="/vbook/assets/js/44.aa0425dc.js"><link rel="prefetch" href="/vbook/assets/js/45.28e1b46e.js"><link rel="prefetch" href="/vbook/assets/js/47.5f63502f.js"><link rel="prefetch" href="/vbook/assets/js/48.07651b39.js"><link rel="prefetch" href="/vbook/assets/js/5.6b3bdc86.js"><link rel="prefetch" href="/vbook/assets/js/6.c9f44ce5.js"><link rel="prefetch" href="/vbook/assets/js/7.c95ece88.js"><link rel="prefetch" href="/vbook/assets/js/8.e5718fb1.js"><link rel="prefetch" href="/vbook/assets/js/9.ba545b0a.js">
    <link rel="stylesheet" href="/vbook/assets/css/0.styles.5726f3cc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vbook/" class="home-link router-link-active"><!----> <span class="site-name">BLOG</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习笔记" class="dropdown-title"><span class="title">前端学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端学习笔记" class="mobile-dropdown-title"><span class="title">前端学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vbook/front-end/evo/优化方式.html" class="nav-link">
  前端优化
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/js/es6知识.html" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/vue/vue知识点.html" class="nav-link">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/webpack/webpack基础.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/net/网络基础.html" class="nav-link">
  网络基础
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/tools/GIT.html" class="nav-link">
  开发工具
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/ci/travis自动部署.html" class="nav-link">
  前端自动化
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后台学习笔记" class="dropdown-title"><span class="title">后台学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="后台学习笔记" class="mobile-dropdown-title"><span class="title">后台学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vbook/back-end/node/express.html" class="nav-link">
  NodeJS
</a></li><li class="dropdown-item"><!----> <a href="/vbook/back-end/lib-web/RESTful.html" class="nav-link">
  web开发知识
</a></li><li class="dropdown-item"><!----> <a href="/vbook/back-end/server/Nginx.html" class="nav-link">
  服务器
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JustDoIT" class="dropdown-title"><span class="title">JustDoIT</span> <span class="arrow down"></span></button> <button type="button" aria-label="JustDoIT" class="mobile-dropdown-title"><span class="title">JustDoIT</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vbook/funs/hardware/arduino.html" class="nav-link">
  硬件
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习笔记" class="dropdown-title"><span class="title">前端学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端学习笔记" class="mobile-dropdown-title"><span class="title">前端学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vbook/front-end/evo/优化方式.html" class="nav-link">
  前端优化
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/js/es6知识.html" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/vue/vue知识点.html" class="nav-link">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/webpack/webpack基础.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/net/网络基础.html" class="nav-link">
  网络基础
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/tools/GIT.html" class="nav-link">
  开发工具
</a></li><li class="dropdown-item"><!----> <a href="/vbook/front-end/ci/travis自动部署.html" class="nav-link">
  前端自动化
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后台学习笔记" class="dropdown-title"><span class="title">后台学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="后台学习笔记" class="mobile-dropdown-title"><span class="title">后台学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vbook/back-end/node/express.html" class="nav-link">
  NodeJS
</a></li><li class="dropdown-item"><!----> <a href="/vbook/back-end/lib-web/RESTful.html" class="nav-link">
  web开发知识
</a></li><li class="dropdown-item"><!----> <a href="/vbook/back-end/server/Nginx.html" class="nav-link">
  服务器
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JustDoIT" class="dropdown-title"><span class="title">JustDoIT</span> <span class="arrow down"></span></button> <button type="button" aria-label="JustDoIT" class="mobile-dropdown-title"><span class="title">JustDoIT</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vbook/funs/hardware/arduino.html" class="nav-link">
  硬件
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>webpack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vbook/front-end/webpack/webpack基础.html" class="active sidebar-link">webpack基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vbook/front-end/webpack/webpack基础.html#webpack" class="sidebar-link">webpack</a></li><li class="sidebar-sub-header"><a href="/vbook/front-end/webpack/webpack基础.html#loader" class="sidebar-link">loader</a></li><li class="sidebar-sub-header"><a href="/vbook/front-end/webpack/webpack基础.html#webpack-插件" class="sidebar-link">webpack 插件</a></li><li class="sidebar-sub-header"><a href="/vbook/front-end/webpack/webpack基础.html#webpack-性能优化" class="sidebar-link">webpack 性能优化</a></li><li class="sidebar-sub-header"><a href="/vbook/front-end/webpack/webpack基础.html#基础-webpack-概念及属性" class="sidebar-link">基础 webpack 概念及属性</a></li></ul></li><li><a href="/vbook/front-end/webpack/vue-cli.html" class="sidebar-link">vue-cli</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="webpack"><a href="#webpack" class="header-anchor">#</a> webpack</h2> <h3 id="概念"><a href="#概念" class="header-anchor">#</a> 概念</h3> <p>webpack* 是一个现代 JavaScript 应用程序的<em>静态模块打包器(module bundler)</em>。当 webpack 处理应用程序时，它会递归地构建一个<em>依赖关系图(dependency graph)</em>，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 *bundle*（ 分块束 ）</p> <p>Webpack 底层是由 Node.js 来开发的，也就是说 Webpack 的配置文件都是 Node.js 文件</p> <h2 id="loader"><a href="#loader" class="header-anchor">#</a> loader</h2> <p>Loader 可以看作具有文件转换功能的翻译员，配置里的 <code>module.rules</code> 数组配置了一组规则，</p> <p>告诉 Webpack 在遇到哪些文件时使用哪些 Loader 去加载和转换。（因为 webpack 自身只理解 JavaScript）</p> <ul><li><h3 id="常用-loader"><a href="#常用-loader" class="header-anchor">#</a> 常用 loader</h3> <h3 id="css-类"><a href="#css-类" class="header-anchor">#</a> css 类</h3> <ul><li><h3 id="css-loader"><a href="#css-loader" class="header-anchor">#</a> css-loader</h3> <p>解释<code>@import</code> 和 <code>url()</code>，会 <code>import/require()</code> 后再解析它们。</p> <p><code>css-loader</code>前应用了<code>loader</code>需要指定<code>importLoaders</code>选项</p></li> <li><h3 id="less-loader-sass-loader"><a href="#less-loader-sass-loader" class="header-anchor">#</a> less-loader / sass-loader</h3> <p>解析 less、scss 为 css 文件</p></li></ul> <hr> <h3 id="js-类"><a href="#js-类" class="header-anchor">#</a> JS 类</h3> <ul><li><h3 id="babel-loader"><a href="#babel-loader" class="header-anchor">#</a> babel-loader</h3> <p><code>babel-loader</code>基于<code>babel</code>，用于解析<code>JavaScript</code>文件。</p> <p><code>babel</code>有丰富的预设和插件，<code>babel</code>的配置可以直接写到<code>options</code>里或者单独写道配置文件里。</p> <p><code>babel</code>常用的预设有<code>@babel/preset-env</code>、<code>@babel/plugin-proposal-class-properties</code>等；</p></li></ul> <hr> <h3 id="其他资源-图片、字体"><a href="#其他资源-图片、字体" class="header-anchor">#</a> 其他资源（图片、字体）</h3> <ul><li><h3 id="file-loader"><a href="#file-loader" class="header-anchor">#</a> file-loader</h3> <p>告诉<code>Webpack</code>引用的模块是一个文件，并返回其打包后的<code>url</code></p></li> <li><h3 id="url-loader"><a href="#url-loader" class="header-anchor">#</a> url-loader</h3> <p>作用与<code>file-loader</code>类似，但当文件大小（单位 byte）低于指定的限制时，可以返回一个 DataURL。</p></li></ul></li></ul> <h2 id="webpack-插件"><a href="#webpack-插件" class="header-anchor">#</a> webpack 插件</h2> <p>Plugin 是用来扩展 Webpack 功能的，通过在构建流程里注入钩子实现，它给 Webpack 带来了很大的灵活性。</p> <h3 id="常用-webpack-plugins"><a href="#常用-webpack-plugins" class="header-anchor">#</a> 常用 webpack plugins</h3> <ul><li><h3 id="html-webpack-plugin"><a href="#html-webpack-plugin" class="header-anchor">#</a> html-webpack-plugin</h3> <p>当使用 <code>webpack</code>打包时，创建一个 <code>html</code> 文件，并把 <code>webpack</code> 打包后的静态文件自动插入到这个 <code>html</code> 文件当中。</p></li> <li><h3 id="optimization-splitchunks"><a href="#optimization-splitchunks" class="header-anchor">#</a> optimization.splitChunks</h3> <p>提取被重复引入的文件，单独生成一个或多个文件，这样避免在多入口重复打包文件。</p></li> <li><h3 id="clean-webpack-plugin"><a href="#clean-webpack-plugin" class="header-anchor">#</a> clean-webpack-plugin</h3></li> <li><h3 id="copy-webpack-plugin"><a href="#copy-webpack-plugin" class="header-anchor">#</a> copy-webpack-plugin</h3></li></ul> <h2 id="webpack-性能优化"><a href="#webpack-性能优化" class="header-anchor">#</a> webpack 性能优化</h2> <blockquote><p><a href="https://segmentfault.com/a/1190000018493260" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000018493260<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h3 id="优化编译速度"><a href="#优化编译速度" class="header-anchor">#</a> 优化编译速度</h3> <ul><li><h3 id="happypack-并行构建-优化-loader"><a href="#happypack-并行构建-优化-loader" class="header-anchor">#</a> HappyPack 并行构建 [优化 loader]</h3> <p>**核心原理：**将 webpack 中最耗时的 loader 文件转换操作任务，分解到多个进程中并行处理，从而减少构建时间。</p></li> <li><h3 id="paralleluglifyplugin-并行构建-优化压缩文件速度"><a href="#paralleluglifyplugin-并行构建-优化压缩文件速度" class="header-anchor">#</a> ParallelUglifyPlugin 并行构建 [优化压缩文件速度]</h3> <p>**原理：**webpack-parallel-uglify-plugin 能够把任务分解给多个子进程去并发的执行，子进程处理完后再把结果发送给主进程，从而实现并发编译，进而大幅提升 js 压缩速度</p></li> <li><h3 id="dllplugin-提前打包公共依赖-减少打包文件"><a href="#dllplugin-提前打包公共依赖-减少打包文件" class="header-anchor">#</a> DllPlugin 提前打包公共依赖 [减少打包文件]</h3> <p><strong>原理：</strong> 1. 将依赖的第三方模块抽离，打包到一个个单独的动态链接库中；</p> <p>2.当需要导入的模块存在动态链接库中时，让其直接从链接库中获取，而不用再去编译第三方库；</p> <p>3.这样第三方库就只需要打包一次。</p></li></ul> <h2 id="基础-webpack-概念及属性"><a href="#基础-webpack-概念及属性" class="header-anchor">#</a> 基础 webpack 概念及属性</h2> <h3 id="打包文件类型"><a href="#打包文件类型" class="header-anchor">#</a> 打包文件类型</h3> <p>module / chunk / bundle</p> <ol><li>对于一份同逻辑的代码，当我们手写下一个一个的文件，它们无论是 ESM 还是 commonJS 或是 AMD，他们都是 <strong>module</strong> ；</li> <li>当我们写的 module 源文件传到 webpack 进行打包时，webpack 会根据文件引用关系生成 <strong>chunk</strong> 文件，webpack 会对这个 chunk 文件进行一些操作；</li> <li>webpack 处理好 chunk 文件后，最后会输出 <strong>bundle</strong> 文件，这个 bundle 文件包含了经过加载和编译的最终源文件，所以它可以直接在浏览器中运行。</li></ol> <p>一般来说一个 chunk 对应一个 bundle；</p> <p>但也有例外，比如用 <code>MiniCssExtractPlugin</code> 从 chunks 0 中抽离出 <code>index.bundle.css</code> 文件。</p> <p>总结：</p> <p><code>module</code>，<code>chunk</code> 和 <code>bundle</code> 其实就是同一份逻辑代码在不同转换场景下的取了三个名字：</p> <p>我们直接写出来的是 module，webpack 处理时是 chunk，最后生成浏览器可以直接运行的 bundle。</p> <h3 id="filename"><a href="#filename" class="header-anchor">#</a> filename</h3> <p>filename 用来设置打包后输出的文件名；<a href="https://www.webpackjs.com/configuration/output/#output-filename" target="_blank" rel="noopener noreferrer">官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>output: {
	filename: 'js/chunk-[hash].js',
\},
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这里说一下**[hash]、[chunkhash]、[contenthash]**之间的区别；</p> <ul><li><h3 id="hash"><a href="#hash" class="header-anchor">#</a> hash</h3> <p>hash 计算是跟整个项目的构建相关，生成的 hash 只要项目中有一个文件修改了，所以文件的 hash 都会更改；</p></li> <li><h3 id="chunkhash"><a href="#chunkhash" class="header-anchor">#</a> chunkhash</h3> <p>可以理解为热更新，生成规则是<strong>根据不同的入口文件(Entry)进行依赖文件解析、构建对应的 chunk，生成对应的哈希值</strong>；所以只要当前 chunk 内容没有更改，是不会重新生成文件名 hash；</p> <p>这样也有利于客户端缓存；</p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/vbook/front-end/webpack/vue-cli.html">
        vue-cli
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vbook/assets/js/app.64803a45.js" defer></script><script src="/vbook/assets/js/2.dceffa7a.js" defer></script><script src="/vbook/assets/js/46.9f678d14.js" defer></script>
  </body>
</html>
