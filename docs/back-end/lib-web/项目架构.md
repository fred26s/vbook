## 三层架构

[三层架构](https://baike.baidu.com/item/三层架构/11031448)(3-tier architecture) 通常意义上的三层架构就是将整个业务应用划分为：界面层（User Interface layer）、业务逻辑层（Business Logic Layer）、数据访问层（Data access layer）。区分层次的目的即为了“[高内聚低耦合](https://baike.baidu.com/item/高内聚低耦合/5227009)”的思想。在软件体系架构设计中，分层式结构是最常见，也是最重要的一种结构。微软推荐的分层式结构一般分为三层，从下至上分别为：数据访问层、业务逻辑层（又或称为领域层）、表示层。

## MVC

[MVC](https://baike.baidu.com/item/MVC)全名是 Model View Controller，是模型(model)－视图(view)－控制器(controller)的缩写，一种软件设计典范，用一种业务逻辑、数据、界面显示分离的方法组织代码，将业务逻辑聚集到一个部件里面，在改进和个性化定制界面及用户交互的同时，不需要重新编写业务逻辑。MVC 被独特的发展起来用于映射传统的输入、处理和输出功能在一个逻辑的图形化用户界面的结构中。

![img](//img.callbackhell.xyz/vuepress/lib-web/mvc.png)

## 三层架构和 MVC 的区别

MVC（模型 Model-视图 View-控制器 Controller）是一种架构模式，可以用它来创建在域对象和 UI 表示层对象之间的区分。

同样是架构级别的，相同的地方在于他们都有一个表现层，但是他们不同的地方在于其他的两个层。

在三层架构中没有定义 Controller 的概念。这是最不同的地方。而 MVC 也没有把业务的逻辑访问看成两个层，这是采用三层架构或 MVC 搭建程序最主要的区别。当然了。在三层中也提到了 Model，但是三层架构中 Model 的概念与 MVC 中 Model 的概念是不一样的，“三层”中典型的 Model 层是由业务逻辑与访问数据组成的。而 MVC 里，则是以实体类构成的。

MVC 和三层架构的区别：
M 即 Model(模型层),主要负责处理业务逻辑以及数据库的交互
V 即 View(视图层),主要负责显示数据和提交数据
C 即 Controller(控制层),主要是永作辅助捕获请求并控制请求转发

​ 三层
​ UI 界面层
​ BLL 业务逻辑层
​ DAL 数据访问层

​ 三层是基于业务逻辑来分的，而 mvc 是基于页面来分的
​ MVC 模式是一种复合设计模式，一种解决方案
​ 三层是种软件架构，通过接口实现编程
​ 三层模式是体系结构模式，MVC 是设计模式
​ 三层模式又可归于部署模式，MVC 可归于表示模式

## [三层架构与 MVC 的区别](https://www.cnblogs.com/zdxster/p/5305155.html) 再详解

我们平时总是将混为一谈，殊不知它俩并不是一个概念。下面我来为大家揭晓我所知道的一些真相。

### 概念区别

首先，它俩根本不是一个概念。

三层架构是一个分层式的软件体系架构设计，它可适用于任何一个项目。

MVC 是一个设计模式，它是根据项目的具体需求来决定是否适用于该项目。

那么架构跟设计模式有什么区别呢？

我们从接手一个项目开始，首先，我们需要进行架构设计，一般我们采用的就是分层式的架构设计，即我们的三层架构。

然后，在确定了架构以后，我们再根据项目的具体需求去考虑是否需要应用一些设计模式，比如是否应用我们的 MVC 模式，抽象工厂模式等等。（在这里我们看出，MVC 与三层架构不是一个等级的，而与抽象工厂等设计模式才是一路的）

最后，确定了模式以后，就是我们的一些具体的实现了。（当然一个项目不仅仅考虑这些问题，我只是为了说明两者的区别，将其他问题已省略）

### 层次

其次，它俩划分的层次不同。

三层架构将整个项目划分为：表现层（UI）、业务逻辑层（BLL）、数据访问层（DAL）。

MVC 即 Model（模型），View（视图），Controller（控制）。

而我们通常所见到的 MVC 一般也都是在应用三层架构的基础上，即将 Model 层再进行分层。而如果 Model 不再进行划分的话，那么使用 MVC 的意义也就不大了。

然后，它俩的目的着重点不同。

### 区分着重点

三层架构的目的着重点是“高内聚，低耦合”，即解耦。

MVC 的目的则是实现 Web 系统的职能分工，即职责划分。

其实职责划分也是解耦，但是三层侧重的是整体的一个解耦，而 MVC 侧重的是 web 系统的解耦，即侧重 jsp 和 Servlet 的一个解耦。

### 区别

为何我们会将其混为一谈？

既然两者有这么多的不同，我们为什么还总是将其混淆呢，下面我列举了几个我们常常将其混为一谈的几个原因：

1. ### 二者都是“三层”。

这个原因是最容易迷惑我们初学者的，一个是 UI,BLL,DAL，一个是 View，Controller，Model，不都是三层吗？

虽然都是“三层”（不一定是真的三层，还可以是多层），但是它们的划分的不一样。大家可从上面的图中看出不同。

2. ### MVC 总是伴随着三层架构。

这个就是我在前面一再强调的，我们一般是在考虑使用（也可以不使用）了三层架构的基础上再根据具体需求决定是否需要使用 MVC，于是我们常说的 MVC 中总是伴随着三层架构，所以大家总是会认为 MVC 就是三层架构，三层架构就是 MVC，殊不知，它们二者是一起出现的。

3. ### 都是在分层，即都是在解耦。

前面说它们目的的时候也说了，虽然它们的侧重点不同，但是它们的总体目的是一样的，都是为了解耦，对于初学者而言，是不知道这两个侧重点有何不同的。

大家往往对它们的联系知道很多，不然也不会混为一谈，但是对它们的区别却知道较少，希望我上面讲解的它们两者之间的区别可以让大家对它们有些了解，如有写的不妥的地方，请指教。

三层架构（3-tier application） 通常意义上的三层架构就是将整个业务应用划分为：表现层（UI）、业务逻辑层（BLL）、数据访问层（DAL）。区分层次的目的即为了“高内聚，低耦合”的思想。

1、表现层（UI）：通俗讲就是展现给用户的界面，即用户在使用一个系统的时候他的所见所得。

2、业务逻辑层（BLL）：针对具体问题的操作，也可以说是对数据层的操作，对数据业务逻辑处理。

3、数据访问层（DAL）：该层所做事务直接操作数据库，针对数据的增添、删除、修改、更新、查找等。

### 示例

拿一个简单的登陆模块说，需求是你输入一个用户名、密码，如果输入的跟预先定义好的一样，那么就进入到正确页面，如果不一样，就提示个错误信息。

V 这个小小的模块中，起始的输入用户名密码的页面跟经过校验后显示的页面就相当于 View C 而这里还需要一个 controller 页面，就是用于接收输入进来的用户名密码，还有经过校验后返回的一个 flg（此 flg 就是用于判断你输入的是否正确，而跳转到相应的页面的）

M 最后还缺一个 Model，那么就是你那个用于校验的类了，他就是处理你输入的是否跟预先订好的一样不一样的，之后返回一个 flg.这样就完全实现了逻辑跟页面的分离，我页面不管你咋整，反正我就一个显示，而 controller 呢也不管你 Model 咋判断对不对，反正我给你了用户名跟密码，你就得给我整回来一个 flg 来，而 Medol 呢，则是反正你敢给我个用户名跟密码，我就给你整过去个 flg

m 提供数据，数据之间的关系，转化等。并可以通知视图和控制器自己哪些地方发生了变化。

v 提供显示，能根据 m 的改变来更新自己 c 比如视图做了点击一个按钮，会先发给这个视图的控制器，然后这个控制器来决定做什么操作（让模型更新数据，控制视图改变）

mvc 是一个复合模式 mv，mc 都是观察者模式 m 内部的组件组合模式 vc 之间是策略模式（可以随时更换不同的控制器）

————————————-

> MVC 模式是上世纪 70 年代提出，最初用于 Smalltalk 平台上的。
>
> MVC 是表现模式，是用来向用户展现的许多组建的一个模式（UI/Presentation Patten）
>
> MVC 有三种角色：Model：用来储存数据的组件（与领域模型概念不同，两者会相互交叉）
>
> View：从 Model 中获取数据进行内容展示的组件。同样的 Model 在不同的 View 下可展示不同的效果。获取 Model 的状态，而不对其进行操作。
>
> Controller：接受并处理用户指令（操作 Model（业务）），选择一个 View 进行操作。
>
> MVC 概述：协作存在单向引用，例如 Model 不知道 View 和 Controller 的存在。View 不知道 Controller 的存在。这就隔离了表现和数据。View 和 controller 是单向引用。而实际中 View 和 Controller 也是有数据交互的。
>
> MVC 的重要特点是分离。两种分离：View 和数据（Model）的分离使用不同的 View 对相同的数据进行展示；分离可视和不可视的组件，能够对 Model 进行独立测试。因为分离了可视组件减少了外部依赖利于测试。（数据库也是一种外部组件）
>
> View 和表现逻辑（Controller）的分离 Controller 是一个表现逻辑的组件，并非一个业务逻辑组件。MVC 可以作为表现模式也可以作为建构模式，意味这 Controller 也可以是业务逻辑。分离逻辑和具体展示，能够对逻辑进行独立测试。
>
> MVC 和三层架构 MVC 与三层架构类似么？
>
> View-UI Layer | Controller-Bussiness Layer | Model-Data Access Layer 其实这样是错误的 MVC 是表现模式（Presentation Pattern）
>
> 三层架构是典型的架构模式（Architecture Pattern）
>
> 三层架构的分层模式是典型的上下关系，上层依赖于下层。但 MVC 作为表现模式是不存在上下关系的，而是相互协作关系。即使将 MVC 当作架构模式，也不是分层模式。MVC 和三层架构基本没有可比性，是应用于不同领域的技术。
