## 浏览器调试工具

### Network

可以看到资源加载详情，初步评估影响`页面性能`的因素。

页面底部是当前加载资源的一个概览：

- `DOMContentLoaded` DOM渲染完成的时间
- `Load`：当前页面所有资源加载完成的时间

### waterfall瀑布流

- `Queueing` 浏览器将资源放入队列时间
- `Stalled` 因放入队列时间而发生的停滞时间
- `DNS Lookup` DNS解析时间
- `Initial connection` 建立HTTP连接的时间
- `SSL` 浏览器与服务器建立安全性连接的时间
- `TTFB` 等待服务端返回数据的时间
- `Content Download` 浏览器下载资源的时间

### Lighthouse

Lighthouse是Google开发的一款开源工具，提供一套全面的测试来评估网页质量，包括加载性能、可访问性、最佳实践和PWA。在chrome 60之后的版本，DevTool里已经内置了Lighthouse。

使用方式：

- 直接在chrome的DevTool中使用

- 使用命令行工具 Node CLI 进行测试 

  ```js
  npm install -g lighthouse
  lighthouse https://www.taobao.com
  ```

- 作为node模块引入代码使用

指标说明：

- `First Contentful Paint` 首屏渲染时间，1s以内绿色
- `Speed Index` 速度指数，4s以内绿色
- `Time to Interactive` 到页面可交换的时间







## 加载优化

前端 web 区别于应用端，页面展示不需要提前下载数据，而是当用户打开网页时，才动态增量形式的下载资源；

所以页面的**加载速度**，很大程度影响了一个网站的性能体验；

### 用户预期

大部分的用户其实都期待页面能够在**2 秒内**加载完成，而当**超过 3 秒**以后，就会有接近**40%**的用户离开你的网站；

### 首屏/白屏优化

用户输入 URL 后，到页面渲染完成，这个阶段处于白屏阶段；

首屏下，以 chrome 举例，最大支持 6 个并发请求，也就是初始化同一时间只能保持 6 个请求；

这就会造成如果资源文件过大，会阻塞后面资源的加载，延长首屏加载时间；

- ### 拆分打包资源

  当单个资源（依赖文件）过大时，可以通过`splitChunksPlugin`进行打包文件拆分；

- ### 预渲染

  因为页面会先获取 HTML，然后再读取 HTML 中引入的 js、css 文件，进行请求下载；

  再根据解析后的内容，进行页面绘制；

  所以我们可以进行 HTML 预渲染，这样在获取 HTML 后，就可以进行页面初始化占位展示；

  增加用户体验。

- ### 开启 HTTP2.0

- ### 浏览器缓存

- ### CDN

- ### 压缩文件（Gzip）

## 执行优化

### CSS 动画

- #### 那么如何避免重绘和回流?

  具体而言,就是多使用 transform 或者 opacity 来实现动画效果,上述方法在合成层使用不会引起重绘和回流.
